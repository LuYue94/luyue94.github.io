<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>Express 4.x API | Hexo</title>
  <meta name="keywords" content=" Node ">
  <meta name="description" content="Express 4.x API | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="GET&amp;#x548C;POST&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x533A;&amp;#x522B;&amp;#xFF1F; &amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0D;&amp;#x540C;&amp;#xFF1A;GET&amp;#x8BF7;&amp;#x6C42;&amp;#x901A;&amp;#x8FC7;URL&amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#">
<meta name="keywords" content="前端">
<meta property="og:type" content="article">
<meta property="og:title" content="面试：前端">
<meta property="og:url" content="http://luyue94.github.com/2019/09/26/面试/前端/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="GET&amp;#x548C;POST&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x533A;&amp;#x522B;&amp;#xFF1F; &amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0D;&amp;#x540C;&amp;#xFF1A;GET&amp;#x8BF7;&amp;#x6C42;&amp;#x901A;&amp;#x8FC7;URL&amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-09-27T07:23:40.720Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="面试：前端">
<meta name="twitter:description" content="GET&amp;#x548C;POST&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x533A;&amp;#x522B;&amp;#xFF1F; &amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0D;&amp;#x540C;&amp;#xFF1A;GET&amp;#x8BF7;&amp;#x6C42;&amp;#x901A;&amp;#x8FC7;URL&amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-dark.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1"></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.0.1"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value>
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Eifersucht</span>
</div>

<div class="icon">
    
        
        <a title="github" href="https://github.com/luyue94" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="email" href="mailto:luyue94666@163.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=84285251&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(70)</small></div></li>
    
        
            
            <li><div data-rel="前端"><i class="fold iconfont icon-right"></i>前端<small>(38)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="ES6">ES6<small>(9)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="JavaScript">JavaScript<small>(17)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="面试">面试<small>(7)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Nodejs">Nodejs<small>(13)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="后端">后端<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="工具">工具<small>(7)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="算法">算法<small>(4)</small></div>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="70">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="Search..." autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">CSS</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">Node</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">前端</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color1">React</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">浏览器</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">移动端</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">工具</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">JS</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color4">Vue</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a  class="前端 "
           href="/2018/03/23/CSS/"
           data-tag="CSS"
           data-author="" >
            <span class="post-title" title="CSS">CSS</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/20/TODO/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="TODO">TODO</span>
            <span class="post-date" title="2019-09-20 14:57:00">2019/09/20</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/Buffer/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Buffer">Buffer</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/Directory/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Node">Node</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/EventEmitter/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="EventEmitter">EventEmitter</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/FileSystem/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="FileSystem">FileSystem</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/HTTP服务器/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Http服务器">Http服务器</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/Stream/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Stream">Stream</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/http模块/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Http模块">Http模块</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/基础笔记/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="基础笔记">基础笔记</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/node应用/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="应用">应用</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/module/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Module">Module</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/模块/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="模块">模块</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/process/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Process">Process</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
        <a  class="后端 "
           href="/2018/03/23/后端/MongoDB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="MongoDB">MongoDB</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/HTML/"
           data-tag="前端"
           data-author="" >
            <span class="post-title" title="HTML">HTML</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/ReactNative样式/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React Native">React Native</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/ReactNative/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React Navtive2">React Navtive2</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/浏览器 http/"
           data-tag="浏览器"
           data-author="" >
            <span class="post-title" title="浏览器 HTTP">浏览器 HTTP</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/emmet语法/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="emmet">emmet</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/移动端/"
           data-tag="移动端"
           data-author="" >
            <span class="post-title" title="移动端">移动端</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/markdown语法/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Markdown">Markdown</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/gulp+webpack配置/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="gulp+webpack的配置">gulp+webpack的配置</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/scss和gulp-sass/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Gulp-sass">Gulp-sass</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/webpack/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Webpack">Webpack</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/博客搭建/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="博客搭建">博客搭建</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/工具/工具/"
           data-tag="工具"
           data-author="" >
            <span class="post-title" title="开发工具">开发工具</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/10/面试/JS/"
           data-tag="JS"
           data-author="" >
            <span class="post-title" title="面试：JS">面试：JS</span>
            <span class="post-date" title="2019-09-10 20:36:20">2019/09/10</span>
        </a>
        
        <a  class="工具 "
           href="/2018/03/23/工具/正则表达式/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="正则表达式">正则表达式</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/26/面试/前端/"
           data-tag="前端"
           data-author="" >
            <span class="post-title" title="面试：前端">面试：前端</span>
            <span class="post-date" title="2019-09-26 15:13:10">2019/09/26</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/10/面试/阿里2017/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="2017暑期阿里面试总结(前端方向)">2017暑期阿里面试总结(前端方向)</span>
            <span class="post-date" title="2019-09-10 20:36:20">2019/09/10</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/20/面试/深拷贝/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="深拷贝">深拷贝</span>
            <span class="post-date" title="2019-09-20 14:39:02">2019/09/20</span>
        </a>
        
        <a  class="算法 "
           href="/2018/03/23/算法/树与二叉树/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="树与二叉树">树与二叉树</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="算法 "
           href="/2018/03/23/算法/数据结构/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="数据结构">数据结构</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/10/面试/面试常见问题/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="面试常见问题">面试常见问题</span>
            <span class="post-date" title="2019-09-10 20:36:20">2019/09/10</span>
        </a>
        
        <a  class="算法 "
           href="/2018/03/23/算法/算法/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="算法问题">算法问题</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="算法 "
           href="/2018/03/23/算法/算法排序/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="排序">排序</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="面试 "
           href="/2019/09/10/面试/Vue/"
           data-tag="Vue"
           data-author="" >
            <span class="post-title" title="面试：Vue">面试：Vue</span>
            <span class="post-date" title="2019-09-10 20:36:20">2019/09/10</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/ES6函数扩展/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6函数扩展">ES6函数扩展</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/ES6基础/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6基础">ES6基础</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/ES6数组扩展/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6数组扩展">ES6数组扩展</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/ES6正则表达式扩展/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6正则表达式扩展">ES6正则表达式扩展</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/let与const命令/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6let与const">ES6let与const</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/字符串/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6字符串">ES6字符串</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/字符编码/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6字符编码">ES6字符编码</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/解构赋值/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6解构赋值">ES6解构赋值</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/HTML5/SVG/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SVG">SVG</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/HTML5/本地存储/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="localStorage与sessionStorage">localStorage与sessionStorage</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/Ajax/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Ajax">Ajax</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/CommonJS/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CommonJs">CommonJs</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/DOM样式/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="DOM样式">DOM样式</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/DOM对象/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="DOM对象">DOM对象</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/HTML网页API/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="浏览器API">浏览器API</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/JavaScript数值/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="数值">数值</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/JSON/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="JSON">JSON</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/Object对象/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Object对象">Object对象</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/npm/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="npm">npm</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/export、import与require/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="模块加载">模块加载</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/webpack/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="webpack">webpack</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/标准对象/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="标准对象">标准对象</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/window对象/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Window对象">Window对象</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/函数/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="函数">函数</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/移动端事件/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="移动端事件">移动端事件</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/数组/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="数组">数组</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/react/React1/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React1">React1</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 JavaScript "
           href="/2018/03/23/前端/javascript/面向对象编程/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="面向对象编程">面向对象编程</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/react/React2/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React2">React2</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 "
           href="/2018/03/23/前端/react/reactRouter/"
           data-tag="React"
           data-author="" >
            <span class="post-title" title="React Router">React Router</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="前端 ES6 "
           href="/2018/03/23/前端/ES6/ES6对象扩展/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ES6对象扩展">ES6对象扩展</span>
            <span class="post-date" title="2018-03-23 15:13:49">2018/03/23</span>
        </a>
        
        <a  class="Nodejs "
           href="/2018/06/28/Nodejs/Express中文文档/"
           data-tag="Node"
           data-author="" >
            <span class="post-title" title="Express 4.x API">Express 4.x API</span>
            <span class="post-date" title="2018-06-28 16:03:55">2018/06/28</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-Nodejs/Express中文文档" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Express 4.x API</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a href="javascript:" data-rel="Nodejs">Nodejs</a>
            
        </span>
        
        
        <span class="tag">
            
            <a href="javascript:" class="color5">Node</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2019-09-19 14:29:28'>2018-06-28 16:03</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#express"><span class="toc-text">express()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods"><span class="toc-text">Methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#express-static-root-options"><span class="toc-text">express.static(root, [options])</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Application"><span class="toc-text">Application()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Properties"><span class="toc-text">Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-locals"><span class="toc-text">app.locals</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-mountpath"><span class="toc-text">app.mountpath</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Events"><span class="toc-text">Events</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-on-‘mount’-callback-parent"><span class="toc-text">app.on(‘mount’, callback(parent))</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods-1"><span class="toc-text">Methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-all-path-callback-callback-…"><span class="toc-text">app.all(path, callback[, callback …]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-delete-path-callback-callback-…"><span class="toc-text">app.delete(path, callback[, callback …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-disable-name"><span class="toc-text">app.disable(name)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-disabled-name"><span class="toc-text">app.disabled(name)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-enable-name"><span class="toc-text">app.enable(name)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-enabled-name"><span class="toc-text">app.enabled(name)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-engine-ext-callback"><span class="toc-text">app.engine(ext, callback)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-get-name"><span class="toc-text">app.get(name)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-get-path-callback-callback-…"><span class="toc-text">app.get(path, callback [, callback …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-listen-port-hostname-backlog-callback"><span class="toc-text">app.listen(port, [hostname], [backlog], [callback])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-METHOD-path-callback-callback-…"><span class="toc-text">app.METHOD(path, callback [, callback …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-param-name-callback"><span class="toc-text">app.param([name], callback)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-path"><span class="toc-text">app.path()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-post-path-callback-callback-…"><span class="toc-text">app.post(path, callback, [callback …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-put-path-callback-callback-…"><span class="toc-text">app.put(path, callback, [callback …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-render-view-locals-callback"><span class="toc-text">app.render(view, [locals], callback)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-route-path"><span class="toc-text">app.route(path)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-set-name-value"><span class="toc-text">app.set(name, value)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-use-path-function-function…"><span class="toc-text">app.use([path,], function [, function…])</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Request"><span class="toc-text">Request</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Properties-1"><span class="toc-text">Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#req-app"><span class="toc-text">req.app</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-baseUrl"><span class="toc-text">req.baseUrl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-body"><span class="toc-text">req.body</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-cookies"><span class="toc-text">req.cookies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-fresh"><span class="toc-text">req.fresh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-hostname"><span class="toc-text">req.hostname</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-ips"><span class="toc-text">req.ips</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-originalUrl"><span class="toc-text">req.originalUrl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-params"><span class="toc-text">req.params</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-path"><span class="toc-text">req.path</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-protocol"><span class="toc-text">req.protocol</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-query"><span class="toc-text">req.query</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-route"><span class="toc-text">req.route</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-secure"><span class="toc-text">req.secure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-signedCookies"><span class="toc-text">req.signedCookies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-stale"><span class="toc-text">req.stale</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-subdomains"><span class="toc-text">req.subdomains</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-xhr"><span class="toc-text">req.xhr</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods-2"><span class="toc-text">Methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#req-accepts-types"><span class="toc-text">req.accepts(types)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-acceptsCharsets-charset-…"><span class="toc-text">req.acceptsCharsets(charset[, …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-acceptsEncodings-encoding-…"><span class="toc-text">req.acceptsEncodings(encoding[, …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-acceptsLanguages-lang-…"><span class="toc-text">req.acceptsLanguages(lang [, …])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-get-field"><span class="toc-text">req.get(field)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-is-type"><span class="toc-text">req.is(type)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#req-param-naem-defaultValue"><span class="toc-text">req.param(naem, [, defaultValue])</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Response"><span class="toc-text">Response</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Properties-2"><span class="toc-text">Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#res-app"><span class="toc-text">res.app</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-headersSent"><span class="toc-text">res.headersSent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-locals"><span class="toc-text">res.locals</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods-3"><span class="toc-text">Methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#res-append-field-value"><span class="toc-text">res.append(field [, value])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-attachment-filename"><span class="toc-text">res.attachment([filename])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-cookie-name-value-options"><span class="toc-text">res.cookie(name, value [,options])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-clearCookie-name-options"><span class="toc-text">res.clearCookie(name [,options])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-download-path-filename-fn"><span class="toc-text">res.download(path, [,filename], [,fn])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-end-data-encoding"><span class="toc-text">res.end([data] [, encoding])</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#res-format-object"><span class="toc-text">res.format(object)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#router-METHOD-path-callback-…-callback"><span class="toc-text">router.METHOD(path, [callback, …] callback)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#router-param-name-callback"><span class="toc-text">router.param(name, callback)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#router-route-path"><span class="toc-text">router.route(path)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#router-use-path-function-…-function"><span class="toc-text">router.use([path], [function, …] function)</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="express"><a href="#express" class="headerlink" title="express()"></a>express()</h2><p><code>express()</code>&#x7528;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Express&#x7684;&#x7A0B;&#x5E8F;&#x3002;<code>express()</code>&#x65B9;&#x6CD5;&#x662F;<strong><em>express</em></strong>&#x6A21;&#x5757;&#x5BFC;&#x51FA;&#x7684;&#x9876;&#x5C42;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="js">var express = require(&apos;express&apos;);
var app = express();</code></pre>
<h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><h4 id="express-static-root-options"><a href="#express-static-root-options" class="headerlink" title="express.static(root, [options])"></a>express.static(root, [options])</h4><p><code>express.static</code>&#x662F;Express&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x5185;&#x5EFA;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x5B83;&#x4EE5;<a href="https://github.com/expressjs/serve-static?_ga=1.1179825.1201680737.1446005628" target="_blank" rel="noopener">server-static</a>&#x6A21;&#x5757;&#x4E3A;&#x57FA;&#x7840;&#x5F00;&#x53D1;&#xFF0C;&#x8D1F;&#x8D23;&#x6258;&#x7BA1; Express &#x5E94;&#x7528;&#x5185;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x3002;<br>&#x53C2;&#x6570;<code>root</code>&#x4E3A;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x7684;&#x6240;&#x5728;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x3002;<br>&#x53C2;&#x6570;<code>options</code>&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x652F;&#x6301;&#x4EE5;&#x4E0B;&#x7684;&#x5C5E;&#x6027;&#xFF1A;<br>|&#x5C5E;&#x6027;|&#x63CF;&#x8FF0;|&#x7C7B;&#x578B;|&#x9ED8;&#x8BA4;&#x503C;|<br>|:&#x2014;-:|:&#x2014;-:|:&#x2014;-:|:&#x2014;&#x2014;:|<br>|dotfiles|&#x662F;&#x5426;&#x54CD;&#x5E94;&#x70B9;&#x6587;&#x4EF6;&#x3002;&#x4F9B;&#x9009;&#x62E9;&#x7684;&#x503C;&#x6709;&#x201D;allow&#x201D;&#xFF0C;&#x201D;deny&#x201D;&#x548C;&#x201D;ignore&#x201D;|String|&#x201D;ignore&#x201D;|<br>|etag|&#x4F7F;&#x80FD;&#x6216;&#x8005;&#x5173;&#x95ED;etag|Boolean|true|<br>|extensions|&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x5EF6;&#x671F;&#x56DE;&#x9000;|Boolean|true|<br>|index|&#x53D1;&#x9001;&#x76EE;&#x5F55;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#x3002;&#x8BBE;&#x7F6E;false&#x5C06;&#x4E0D;&#x53D1;&#x9001;&#x3002;|Mixed|&#x201D;index.html&#x201D;|<br>|lastModified|&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x5230;<code>Last-Modified</code>&#x5934;&#x90E8;&#x3002;&#x53EF;&#x80FD;&#x7684;&#x53D6;&#x503C;&#x6709;<code>false</code>&#x548C;<code>true</code>&#x3002;|Boolean|true|<br>|maxAge|&#x5728;Cache-Control&#x5934;&#x90E8;&#x4E2D;&#x8BBE;&#x7F6E;<code>max-age</code>&#x5C5E;&#x6027;&#xFF0C;&#x7CBE;&#x5EA6;&#x4E3A;&#x6BEB;&#x79D2;(ms)&#x6216;&#x5219;&#x4E00;&#x6BB5;<a href="https://www.npmjs.org/package/ms" target="_blank" rel="noopener">ms format</a>&#x7684;&#x5B57;&#x7B26;&#x4E32;|Number|0|<br>|redirect|&#x5F53;&#x8BF7;&#x6C42;&#x7684;pathname&#x662F;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x5C3E;&#x968F;&#x201D;/&#x201C;|Boolean|true|<br>|setHeaders|&#x5F53;&#x54CD;&#x5E94;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x8BF7;&#x6C42;&#x65F6;&#x8BBE;&#x7F6E;headers&#x7684;&#x65B9;&#x6CD5;|Funtion||</p>
<p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x5173;&#x4E8E;&#x4F7F;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/starter/static-files.html" target="_blank" rel="noopener">Serving static files in Express</a>&#x3002;</p>
<h2 id="Application"><a href="#Application" class="headerlink" title="Application()"></a>Application()</h2><p><code>app</code>&#x5BF9;&#x8C61;&#x4E00;&#x822C;&#x7528;&#x6765;&#x8868;&#x793A;Express&#x7A0B;&#x5E8F;&#x3002;&#x901A;&#x8FC7;&#x8C03;&#x7528;Express&#x6A21;&#x5757;&#x5BFC;&#x51FA;&#x7684;&#x9876;&#x5C42;&#x7684;<code>express()</code>&#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x5B83;:</p>
<pre><code class="js">var express = require(&apos;express&apos;);
var app = express();

app.get(&apos;/&apos;, function(req, res) {
    res.send(&apos;hello world!&apos;);
});

app.listen(3000);</code></pre>
<p><code>app</code>&#x5BF9;&#x8C61;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x8DEF;&#x7531;HTTP&#x8BF7;&#x6C42;&#xFF1B;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x770B;<a href="http://expressjs.com/4x/api.html#app.METHOD" target="_blank" rel="noopener">app.METHOD</a>&#x548C;<a href="http://expressjs.com/4x/api.html#app.param" target="_blank" rel="noopener">app.param</a>&#x8FD9;&#x4E24;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;</li>
<li>&#x914D;&#x7F6E;&#x4E2D;&#x95F4;&#x4EF6;&#xFF1B;&#x5177;&#x4F53;&#x8BF7;&#x770B;<a href="http://expressjs.com/4x/api.html#app.route" target="_blank" rel="noopener">app.route</a>&#x3002;</li>
<li>&#x6E32;&#x67D3;HTML&#x89C6;&#x56FE;&#xFF1B;&#x5177;&#x4F53;&#x8BF7;&#x770B;<a href="http://expressjs.com/4x/api.html#app.render" target="_blank" rel="noopener">app.render</a>&#x3002;</li>
<li>&#x6CE8;&#x518C;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF1B;&#x5177;&#x4F53;&#x8BF7;&#x770B;<a href="http://expressjs.com/4x/api.html#app.engine" target="_blank" rel="noopener">app.engine</a>&#x3002;</li>
</ul>
<p>&#x5B83;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#xFF0C;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x7A0B;&#x5E8F;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">Application settings</a>&#x3002;</p>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><h4 id="app-locals"><a href="#app-locals" class="headerlink" title="app.locals"></a>app.locals</h4><p><code>app.locals</code>&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x4E2A;javascript&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x7684;&#x5C5E;&#x6027;&#x5C31;&#x662F;&#x7A0B;&#x5E8F;&#x672C;&#x5730;&#x7684;&#x53D8;&#x91CF;&#x3002;</p>
<pre><code class="js">app.locals.title
// =&gt; &apos;My App&apos;

app.locals.email
// =&gt; &apos;me@myapp.com&apos;</code></pre>
<p>&#x4E00;&#x65E6;&#x8BBE;&#x5B9A;&#xFF0C;<code>app.locals</code>&#x7684;&#x5404;&#x5C5E;&#x6027;&#x503C;&#x5C06;&#x8D2F;&#x7A7F;&#x7A0B;&#x5E8F;&#x7684;&#x6574;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x4E0E;&#x5176;&#x76F8;&#x53CD;&#x7684;&#x662F;<code>res.locals</code>&#xFF0C;&#x5B83;&#x53EA;&#x5728;&#x8FD9;&#x6B21;&#x8BF7;&#x6C42;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D;&#x6709;&#x6548;&#x3002;</p>
<p>&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6E32;&#x67D3;&#x6A21;&#x677F;&#x65F6;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x3002;&#x5B83;&#x4EEC;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x6A21;&#x677F;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x6709;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x53CA;<code>app</code>&#x7EA7;&#x522B;&#x7684;&#x6570;&#x636E;&#x3002;&#x901A;&#x8FC7;<code>req.app.locals</code>(&#x5177;&#x4F53;&#x67E5;&#x770B;<a href="http://expressjs.com/4x/api.html#req.app" target="_blank" rel="noopener">req.app</a>)&#xFF0C;Locals&#x53EF;&#x4EE5;&#x5728;&#x4E2D;&#x95F4;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x3002;</p>
<pre><code class="js">app.locals.title = &apos;My App&apos;;
app.locals.strftime = require(&apos;strftime&apos;);
app.locals.email = &apos;me@myapp.com&apos;;</code></pre>
<h4 id="app-mountpath"><a href="#app-mountpath" class="headerlink" title="app.mountpath"></a>app.mountpath</h4><p><code>app.mountpath</code>&#x5C5E;&#x6027;&#x662F;&#x5B50;&#x7A0B;&#x5E8F;&#x6302;&#x8F7D;&#x7684;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#x3002;</p>
<blockquote>
<p>&#x4E00;&#x4E2A;&#x5B50;&#x7A0B;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;<code>express</code>&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5176;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6765;&#x4F5C;&#x4E3A;&#x8DEF;&#x7531;&#x53E5;&#x67C4;&#x6765;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x3002;</p>
</blockquote>
<pre><code class="js">var express = require(&apos;express&apos;);
var app = express(); // the main app
var admin = express(); // the sub app
admin.get(&apos;/&apos;, function(req, res) {
    console.log(admin.mountpath); // /admin
    res.send(&apos;Admin Homepage&apos;);
});

app.use(&apos;/admin&apos;, admin); // mount the sub app</code></pre>
<p>&#x5B83;&#x548C;req&#x5BF9;&#x8C61;&#x7684;<a href="http://expressjs.com/4x/api.html#req.baseUrl" target="_blank" rel="noopener">baseUrl</a>&#x5C5E;&#x6027;&#x6BD4;&#x8F83;&#x76F8;&#x4F3C;&#xFF0C;&#x9664;&#x4E86;<code>req.baseUrl</code>&#x662F;&#x5339;&#x914D;&#x7684;URL&#x8DEF;&#x5F84;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5339;&#x914D;&#x7684;&#x6A21;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5B50;&#x7A0B;&#x5E8F;&#x88AB;&#x6302;&#x8F7D;&#x5728;&#x591A;&#x6761;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#xFF0C;<code>app.mountpath</code>&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x6302;&#x8F7D;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#x9879;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x4F8B;&#x5B50;&#x6240;&#x793A;&#x3002;</p>
<pre><code class="js">var admin = express();
admin.get(&apos;/&apos;, function(req, res) {
    console.log(admin.mountpath); // [&apos;adm*n&apos;, &apos;/manager&apos;]
    res.send(&apos;Admin Homepage&apos;);
});

var secret = express();
secret.get(&apos;/&apos;, function(req, res) {
    console.log(secret.mountpath); // /secr*t
    res.send(&apos;Admin secret&apos;);
});

admin.use(&apos;secr*t&apos;, secret); // load the &apos;secret&apos; router on &apos;/secr*t&apos;, on the &apos;admin&apos; sub app
app.use([&apos;/adm*n&apos;, &apos;/manager&apos;], admin); // load the &apos;admin&apos; router on &apos;/adm*n&apos; and  &apos;/manager&apos; , on the parent app
</code></pre>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><h4 id="app-on-&#x2018;mount&#x2019;-callback-parent"><a href="#app-on-&#x2018;mount&#x2019;-callback-parent" class="headerlink" title="app.on(&#x2018;mount&#x2019;, callback(parent))"></a>app.on(&#x2018;mount&#x2019;, callback(parent))</h4><p>&#x5F53;&#x5B50;&#x7A0B;&#x5E8F;&#x88AB;&#x6302;&#x8F7D;&#x5230;&#x7236;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;<code>mount</code>&#x4E8B;&#x4EF6;&#x88AB;&#x53D1;&#x5C04;&#x3002;&#x7236;&#x7A0B;&#x5E8F;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x4F20;&#x9012;&#x7ED9;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="js">var admin = express();
admin.on(&apos;mount&apos;, function(parent) {
    console.log(&apos;Admin Mounted&apos;);
    console.log(parent); // refers to the parent app
});

admin.get(&apos;/&apos;, function(req, res) {
    res.send(&apos;Admin Homepage&apos;);
});

app.use(&apos;/admin&apos;, admin);
</code></pre>
<h3 id="Methods-1"><a href="#Methods-1" class="headerlink" title="Methods"></a>Methods</h3><h4 id="app-all-path-callback-callback-&#x2026;"><a href="#app-all-path-callback-callback-&#x2026;" class="headerlink" title="app.all(path, callback[, callback &#x2026;]"></a>app.all(path, callback[, callback &#x2026;]</h4><p><code>app.all</code>&#x65B9;&#x6CD5;&#x548C;&#x6807;&#x51C6;&#x7684;<code>app.METHOD()</code>&#x65B9;&#x6CD5;&#x76F8;&#x4F3C;&#xFF0C;&#x9664;&#x4E86;&#x5B83;&#x5339;&#x914D;&#x6240;&#x6709;&#x7684;HTTP&#x52A8;&#x8BCD;&#x3002;<br>&#x5BF9;&#x4E8E;&#x7ED9;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x524D;&#x7F00;&#x6620;&#x5C04;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#xFF0C;&#x6216;&#x8005;&#x65E0;&#x6761;&#x4EF6;&#x5339;&#x914D;&#xFF0C;&#x5B83;&#x662F;&#x5F88;&#x6709;&#x6548;&#x7684;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x628A;&#x4E0B;&#x9762;&#x5185;&#x5BB9;&#x653E;&#x5728;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x8DEF;&#x7531;&#x5B9A;&#x4E49;&#x7684;&#x524D;&#x9762;&#xFF0C;&#x5B83;&#x8981;&#x6C42;&#x6240;&#x6709;&#x4ECE;&#x8FD9;&#x4E2A;&#x70B9;&#x5F00;&#x59CB;&#x7684;&#x8DEF;&#x7531;&#x9700;&#x8981;&#x8BA4;&#x8BC1;&#x548C;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x3002;&#x8BB0;&#x4F4F;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x5B9A;&#x662F;&#x7EC8;&#x70B9;:<code>loadUser</code>&#x53EF;&#x4EE5;&#x5728;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x8C03;&#x7528;<code>next()</code>&#x65B9;&#x6CD5;&#x6765;&#x7EE7;&#x7EED;&#x5339;&#x914D;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="js">app.all(&apos;*&apos;, requireAuthentication, loadUser);</code></pre>
<p>&#x6216;&#x8005;&#x8FD9;&#x79CD;&#x76F8;&#x7B49;&#x7684;&#x5F62;&#x5F0F;:</p>
<pre><code class="js">    app.all(&apos;*&apos;, requireAuthentication);
    app.all(&apos;*&apos;, loadUser);</code></pre>
<p>&#x53E6;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x662F;&#x5168;&#x5C40;&#x7684;&#x767D;&#x540D;&#x5355;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x548C;&#x524D;&#x9762;&#x7684;&#x5F88;&#x50CF;&#xFF0C;&#x7136;&#x800C;&#x5B83;&#x53EA;&#x662F;&#x9650;&#x5236;&#x4EE5;<code>/api</code>&#x5F00;&#x5934;&#x7684;&#x8DEF;&#x5F84;&#x3002;</p>
<pre><code class="js">app.all(&apos;/api/*&apos;, requireAuthentication);</code></pre>
<h4 id="app-delete-path-callback-callback-&#x2026;"><a href="#app-delete-path-callback-callback-&#x2026;" class="headerlink" title="app.delete(path, callback[, callback &#x2026;])"></a>app.delete(path, callback[, callback &#x2026;])</h4><p>&#x8DEF;&#x7531;<code>HTTP DELETE</code>&#x8BF7;&#x6C42;&#x5230;&#x6709;&#x7279;&#x6B8A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x7684;&#x7279;&#x6B8A;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/guide/routing.html" target="_blank" rel="noopener">routing guide</a>&#x3002;<br>&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>next(&apos;router&apos;)</code>&#x6765;&#x7ED5;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="js">app.delete(&apos;/&apos;, function(req, res) {
    res.send(&apos;DELETE request to homepage&apos;);
});</code></pre>
<h4 id="app-disable-name"><a href="#app-disable-name" class="headerlink" title="app.disable(name)"></a>app.disable(name)</h4><p>&#x8BBE;&#x7F6E;&#x7C7B;&#x578B;&#x4E3A;&#x5E03;&#x5C14;&#x7684;&#x8BBE;&#x7F6E;&#x540D;&#x4E3A;<code>name</code>&#x7684;&#x503C;&#x4E3A;<code>false</code>&#xFF0C;&#x6B64;&#x5904;&#x7684;<code>name</code>&#x662F;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">app settings table</a>&#x4E2D;&#x5404;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x4E2A;&#x3002;&#x8C03;&#x7528;<code>app.set(&apos;foo&apos;, false)</code>&#x548C;&#x8C03;&#x7528;<code>app.disable(&apos;foo&apos;)</code>&#x662F;&#x7B49;&#x4EF7;&#x7684;&#x3002;<br>&#x6BD4;&#x5982;:</p>
<pre><code class="js">app.disable(&apos;trust proxy&apos;);
app.get(&apos;trust proxy&apos;);
// =&gt; false</code></pre>
<h4 id="app-disabled-name"><a href="#app-disabled-name" class="headerlink" title="app.disabled(name)"></a>app.disabled(name)</h4><p>&#x8FD4;&#x56DE;<code>true</code>&#x5982;&#x679C;&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x7684;&#x8BBE;&#x7F6E;&#x503C;<code>name</code>&#x88AB;&#x7981;&#x7528;&#x4E3A;<code>false</code>&#xFF0C;&#x6B64;&#x5904;&#x7684;<code>name</code>&#x662F;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">app settings table</a>&#x4E2D;&#x5404;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x4E2A;&#x3002;</p>
<pre><code class="js">    app.disabled(&apos;trust proxy&apos;);
    // =&gt; true
    app.enable(&apos;trust proxy&apos;);
    app.disabled(&apos;trust proxy&apos;);
    // =&gt; false</code></pre>
<h4 id="app-enable-name"><a href="#app-enable-name" class="headerlink" title="app.enable(name)"></a>app.enable(name)</h4><p>&#x8BBE;&#x7F6E;&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x7684;&#x8BBE;&#x7F6E;&#x503C;<code>name</code>&#x4E3A;<code>true</code>&#xFF0C;&#x6B64;&#x5904;&#x7684;<code>name</code>&#x662F;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">app settings table</a>&#x4E2D;&#x5404;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x4E2A;&#x3002;&#x8C03;&#x7528;<code>app.set(&apos;foo&apos;, true)</code>&#x548C;&#x8C03;&#x7528;<code>app.enable(&apos;foo&apos;)</code>&#x662F;&#x7B49;&#x4EF7;&#x7684;&#x3002;</p>
<pre><code class="js">    app.enable(&apos;trust proxy&apos;);
    app.get(&apos;trust proxy&apos;);
    // =&gt; true</code></pre>
<h4 id="app-enabled-name"><a href="#app-enabled-name" class="headerlink" title="app.enabled(name)"></a>app.enabled(name)</h4><p>&#x8FD4;&#x56DE;<code>true</code>&#x5982;&#x679C;&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x7684;&#x8BBE;&#x7F6E;&#x503C;<code>name</code>&#x88AB;&#x542F;&#x52A8;&#x4E3A;<code>true</code>&#xFF0C;&#x6B64;&#x5904;&#x7684;<code>name</code>&#x662F;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">app settings table</a>&#x4E2D;&#x5404;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x4E2A;&#x3002;</p>
<pre><code class="js">    app.enabled(&apos;trust proxy&apos;);
    // =&gt; false
    app.enable(&apos;trust proxy&apos;);
    app.enabled(&apos;trust proxy&apos;);
    // =&gt; true</code></pre>
<h4 id="app-engine-ext-callback"><a href="#app-engine-ext-callback" class="headerlink" title="app.engine(ext, callback)"></a>app.engine(ext, callback)</h4><p>&#x6CE8;&#x518C;&#x7ED9;&#x5B9A;&#x5F15;&#x64CE;&#x7684;&#x56DE;&#x8C03;&#xFF0C;&#x7528;&#x6765;&#x6E32;&#x67D3;&#x5904;&#x7406;ext&#x6587;&#x4EF6;&#x3002;<br>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Express&#x9700;&#x8981;&#x4F7F;&#x7528;<code>require()</code>&#x6765;&#x52A0;&#x8F7D;&#x57FA;&#x4E8E;&#x6587;&#x4EF6;&#x6269;&#x5C55;&#x7684;&#x5F15;&#x64CE;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5C1D;&#x8BD5;&#x6E32;&#x67D3;&#x4E00;&#x4E2A;<code>foo.jade</code>&#x6587;&#x4EF6;&#xFF0C;Express&#x5728;&#x5185;&#x90E8;&#x8C03;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x540C;&#x65F6;&#x7F13;&#x5B58;<code>require()</code>&#x7ED3;&#x679C;&#x4F9B;&#x968F;&#x540E;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x6765;&#x52A0;&#x901F;&#x6027;&#x80FD;&#x3002;</p>
<pre><code class="js">    app.engine(&apos;jade&apos;, require(&apos;jade&apos;).__express);</code></pre>
<p>&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#x7684;<code>.__express</code>&#x65B9;&#x6CD5;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x6216;&#x8005;&#x4F60;&#x5E0C;&#x671B;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x6269;&#x5C55;&#x3002;<br>&#x6BD4;&#x5982;&#xFF0C;&#x4F7F;&#x7528;EJS&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x6765;&#x6E32;&#x67D3;<code>.html</code>&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code class="js">    app.engine(&apos;html&apos;, require(&apos;ejs&apos;).renderFile);</code></pre>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;EJS&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;<code>.renderFile</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6EE1;&#x8DB3;&#x4E86;Express&#x89C4;&#x5B9A;&#x7684;&#x7B7E;&#x540D;&#x89C4;&#x5219;&#xFF1A;<code>(path, options, callback)</code>&#xFF0C;&#x7136;&#x800C;&#x8BB0;&#x4F4F;&#x5728;&#x5185;&#x90E8;&#x5B83;&#x53EA;&#x662F;<code>ejs.__express</code>&#x7684;&#x4E00;&#x4E2A;&#x522B;&#x540D;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x4E8B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>.ejs</code>&#x6269;&#x5C55;&#x3002;<br>&#x4E00;&#x4E9B;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x6CA1;&#x6709;&#x9075;&#x5FAA;&#x8FD9;&#x79CD;&#x89C4;&#x8303;&#xFF0C;<a href="https://github.com/tj/consolidate.js?_ga=1.260760333.1201680737.1446005628" target="_blank" rel="noopener">consolidate.js</a>&#x5E93;&#x6620;&#x5C04;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x4EE5;&#x4E0B;&#x9762;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x4ED6;&#x4EEC;&#x53EF;&#x4EE5;&#x65E0;&#x7F1D;&#x7684;&#x548C;Express&#x5DE5;&#x4F5C;&#x3002;</p>
<pre><code class="js">var engines = require(&apos;consolidate&apos;);
app.engine(&apos;haml&apos;, engines.haml);
app.engine(&apos;html&apos;, engines.hogan);</code></pre>
<h4 id="app-get-name"><a href="#app-get-name" class="headerlink" title="app.get(name)"></a>app.get(name)</h4><p>&#x83B7;&#x5F97;&#x8BBE;&#x7F6E;&#x540D;&#x4E3A;<code>name</code>&#x7684;app&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#xFF0C;&#x6B64;&#x5904;&#x7684;<code>name</code>&#x662F;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">app settings table</a>&#x4E2D;&#x5404;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x4E2A;&#x3002;<br>&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="js">app.get(&apos;title&apos;);
// =&gt; undefined

app.set(&apos;title&apos;, &apos;My Site&apos;);
app.get(&apos;title&apos;);
// =&gt; &apos;My Site&apos;</code></pre>
<h4 id="app-get-path-callback-callback-&#x2026;"><a href="#app-get-path-callback-callback-&#x2026;" class="headerlink" title="app.get(path, callback [, callback &#x2026;])"></a>app.get(path, callback [, callback &#x2026;])</h4><p>&#x8DEF;&#x7531;<code>HTTP GET</code>&#x8BF7;&#x6C42;&#x5230;&#x6709;&#x7279;&#x6B8A;&#x56DE;&#x8C03;&#x7684;&#x7279;&#x6B8A;&#x8DEF;&#x5F84;&#x3002;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/guide/routing.html" target="_blank" rel="noopener">routing guide</a>&#x3002;<br>&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>next(&apos;router&apos;)</code>&#x6765;&#x7ED5;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6CA1;&#x80FD;&#x6EE1;&#x8DB3;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="js">    app.get(&apos;/&apos;, function(req, res) {
        res.send(&apos;GET request to homepage&apos;);
    });</code></pre>
<h4 id="app-listen-port-hostname-backlog-callback"><a href="#app-listen-port-hostname-backlog-callback" class="headerlink" title="app.listen(port, [hostname], [backlog], [callback])"></a>app.listen(port, [hostname], [backlog], [callback])</h4><p>&#x7ED1;&#x5B9A;&#x7A0B;&#x5E8F;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x4E3B;&#x673A;&#x548C;&#x7AEF;&#x53E3;&#x53F7;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x548C;<code>Node</code>&#x4E2D;&#x7684;<a href="http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback" target="_blank" rel="noopener">http.Server.listen()</a>&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<pre><code class="js">    var express = require(&apos;express&apos;);
    var app = express();
    app.listen(3000);</code></pre>
<p>&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>express()</code>&#x8FD4;&#x56DE;&#x5F97;&#x5230;&#x7684;<code>app</code>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;JavaScript&#x7684;<code>Function</code>&#xFF0C;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x6765;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x4F20;&#x9012;&#x7ED9;<code>Node HTTP servers</code>&#x6765;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5176;&#x5C31;&#x53EF;&#x4EE5;&#x5F88;&#x7B80;&#x4FBF;&#x7684;&#x57FA;&#x4E8E;&#x540C;&#x4E00;&#x4EFD;&#x4EE3;&#x7801;&#x63D0;&#x4F9B;http&#x548C;https&#x7248;&#x672C;&#xFF0C;&#x6240;&#x4EE5;app&#x6CA1;&#x6709;&#x4ECE;&#x8FD9;&#x4E9B;&#x7EE7;&#x627F;(&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x56DE;&#x8C03;)&#x3002;</p>
<pre><code class="js">    var express = require(&apos;express&apos;);
    var https = require(&apos;https&apos;);
    var http = require(&apos;http&apos;);

    http.createServer(app).listen(80);
    https.createServer(options, app).listen(443);</code></pre>
<p><code>app.listen()</code>&#x65B9;&#x6CD5;&#x662F;&#x4E0B;&#x9762;&#x6240;&#x793A;&#x7684;&#x4E00;&#x4E2A;&#x4FBF;&#x5229;&#x7684;&#x65B9;&#x6CD5;(&#x53EA;&#x9488;&#x5BF9;HTTP&#x534F;&#x8BAE;):</p>
<pre><code class="js">    app.listen = function() {
        var server = http.createServer(this);
        return server.listen.apply(server, arguments);
    };</code></pre>
<h4 id="app-METHOD-path-callback-callback-&#x2026;"><a href="#app-METHOD-path-callback-callback-&#x2026;" class="headerlink" title="app.METHOD(path, callback [, callback &#x2026;])"></a>app.METHOD(path, callback [, callback &#x2026;])</h4><p>&#x8DEF;&#x7531;&#x4E00;&#x4E2A;HTTP&#x8BF7;&#x6C42;&#xFF0C;<code>METHOD</code>&#x662F;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;HTTP&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;<code>GET</code>&#xFF0C;<code>PUT</code>&#xFF0C;<code>POST</code>&#x7B49;&#x7B49;&#xFF0C;&#x6CE8;&#x610F;&#x662F;&#x5C0F;&#x5199;&#x7684;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x65B9;&#x6CD5;&#x662F;<code>app.get()</code>&#xFF0C;<code>app.post()</code>&#xFF0C;<code>app.put()</code>&#x7B49;&#x7B49;&#x3002;&#x4E0B;&#x9762;&#x6709;&#x5173;&#x4E8E;&#x65B9;&#x6CD5;&#x7684;&#x5B8C;&#x6574;&#x7684;&#x8868;&#x3002;<br>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x770B;<a href="http://expressjs.com/guide/routing.html" target="_blank" rel="noopener">routing guide</a>&#x3002;<br>Express&#x652F;&#x6301;&#x4E0B;&#x9762;&#x7684;&#x8DEF;&#x7531;&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x5E94;&#x4E0E;&#x540C;&#x540D;&#x7684;HTTP&#x65B9;&#x6CD5;&#xFF1A;</p>
<table style="border:0px;background:node">
    <tbody>
        <tr>
            <td style="background:none;border:0px;">
                <ul>
                <li>checkout</li>
                <li>connect</li>
                <li>copy</li>
                <li>delete</li>
                <li>get</li>
                <li>head</li>
                <li>lock</li>
                <li>merge</li>
                <li>mkactivity</li>
                <ul>
            </ul></ul></td>
            <td style="background:none;border:0px;">
               <ul>
                <li>mkcol</li>
                <li>move</li>
                <li>m-search</li>
                <li>notify</li>
                <li>options</li>
                <li>patch</li>
                <li>post</li>
                <li>propfind</li>
                <li>proppatch</li>
                <ul>
            </ul></ul></td>
                        <td style="background:none;border:0px;">
               <ul>
                <li>purege</li>
                <li>put</li>
                <li>report</li>
                <li>search</li>
                <li>subscribe</li>
                <li>trace</li>
                <li>unlock</li>
                <li>unsubscribe</li>
                <ul>
            </ul></ul></td>
        </tr><tr>
    </tr></tbody>
</table>

<blockquote>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E0A;&#x8FF0;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x5BFC;&#x81F4;&#x4E86;&#x65E0;&#x6548;&#x7684;javascript&#x7684;&#x53D8;&#x91CF;&#x540D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E2D;&#x62EC;&#x53F7;&#x7B26;&#x53F7;&#xFF0C;&#x6BD4;&#x5982;,<code>app[&apos;m-search&apos;](&apos;/&apos;, function ...</code></p>
</blockquote>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>next(&apos;router&apos;)</code>&#x6765;&#x7ED5;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x6EE1;&#x8DB3;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<blockquote>
<p>&#x672C;API&#x6587;&#x6863;&#x628A;&#x4F7F;&#x7528;&#x6BD4;&#x8F83;&#x591A;&#x7684;HTTP&#x65B9;&#x6CD5;<code>app.get()</code>&#xFF0C;<code>app.post</code>&#xFF0C;<code>app.put()</code>&#xFF0C;<code>app.delete()</code>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x9879;&#x8FDB;&#x884C;&#x8BF4;&#x660E;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5176;&#x4ED6;&#x4E0A;&#x8FF0;&#x5217;&#x51FA;&#x7684;&#x65B9;&#x6CD5;&#x4EE5;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x5DE5;&#x4F5C;&#x3002;</p>
</blockquote>
<p><code>app.all()</code>&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x8DEF;&#x7531;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4E0D;&#x5C5E;&#x4E8E;HTTP&#x534F;&#x8BAE;&#x4E2D;&#x7684;&#x89C4;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x52A0;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5176;&#x5BF9;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x90FD;&#x6709;&#x6548;&#x3002;</p>
<pre><code class="js">    app.all(&apos;/secret&apos;, function (req, res) {
        console.log(&apos;Accessing the secret section...&apos;);
        next(); // pass control to the next handler
    });</code></pre>
<h4 id="app-param-name-callback"><a href="#app-param-name-callback" class="headerlink" title="app.param([name], callback)"></a>app.param([name], callback)</h4><p>&#x7ED9;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x6DFB;&#x52A0;&#x56DE;&#x8C03;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>name</code>&#x662F;&#x53C2;&#x6570;&#x540D;&#x6216;&#x8005;&#x53C2;&#x6570;&#x6570;&#x7EC4;&#xFF0C;<code>function</code>&#x662F;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x6309;&#x5E8F;&#x662F;&#x8BF7;&#x6C42;&#x5BF9;&#x8C61;&#xFF0C;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#xFF0C;&#x4E0B;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x53C2;&#x6570;&#x503C;&#x548C;&#x53C2;&#x6570;&#x540D;&#x3002;<br>&#x5982;&#x679C;<code>name</code>&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x4F1A;&#x6309;&#x7167;&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x88AB;&#x58F0;&#x660E;&#x7684;&#x987A;&#x5E8F;&#x5C06;&#x56DE;&#x8C03;&#x89E6;&#x53D1;&#x5668;&#x6CE8;&#x518C;&#x4E0B;&#x6765;&#x3002;&#x8FD8;&#x6709;&#xFF0C;&#x5BF9;&#x4E8E;&#x9664;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#xFF0C;&#x5728;&#x4ED6;&#x4EEC;&#x7684;&#x56DE;&#x8C03;&#x4E2D;&#x8C03;&#x7528;<code>next()</code>&#x6765;&#x8C03;&#x7528;&#x4E0B;&#x4E2A;&#x58F0;&#x660E;&#x53C2;&#x6570;&#x7684;&#x56DE;&#x8C03;&#x3002;&#x5BF9;&#x4E8E;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5728;&#x56DE;&#x8C03;&#x4E2D;&#x8C03;&#x7528;<code>next()</code>&#x5C06;&#x8C03;&#x7528;&#x4F4D;&#x4E8E;&#x5F53;&#x524D;&#x5904;&#x7406;&#x8DEF;&#x7531;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5982;&#x679C;<code>name</code>&#x53EA;&#x662F;&#x4E00;&#x4E2A;<code>string</code>&#x90A3;&#x5C31;&#x548C;&#x5B83;&#x662F;&#x4E00;&#x6837;&#x7684;(&#x5C31;&#x662F;&#x8BF4;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x662F;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x548C;&#x6570;&#x7EC4;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x6837;&#x7684;)&#x3002;<br>&#x4F8B;&#x5982;&#xFF0C;&#x5F53;<code>:user</code>&#x51FA;&#x73B0;&#x5728;&#x8DEF;&#x7531;&#x8DEF;&#x5F84;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6620;&#x5C04;&#x7528;&#x6237;&#x52A0;&#x8F7D;&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#x6765;&#x81EA;&#x52A8;&#x63D0;&#x4F9B;<code>req.user</code>&#x7ED9;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#xFF0C;&#x6216;&#x8005;&#x5BF9;&#x8F93;&#x5165;&#x7684;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;</p>
<pre><code class="js">    app.param(&apos;user&apos;, function(req, res, next, id) {
        User.find(id, function(error, user) {
            if (err) {
                next(err);
            }
            else if (user){
                req.user = user;
            } else {
                next(new Error(&apos;failed to load user&apos;));
            }
        });
    });</code></pre>
<p>&#x5BF9;&#x4E8E;<code>Param</code>&#x7684;&#x56DE;&#x8C03;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x7531;&#x6765;&#x8BF4;&#xFF0C;&#x4ED6;&#x4EEC;&#x662F;&#x5C40;&#x90E8;&#x7684;&#x3002;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x88AB;&#x6302;&#x8F7D;&#x7684;app&#x6216;&#x8005;&#x8DEF;&#x7531;&#x7EE7;&#x627F;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5B9A;&#x4E49;&#x5728;<code>app</code>&#x4E0A;&#x7684;<code>Param</code>&#x56DE;&#x8C03;&#x53EA;&#x6709;&#x662F;&#x5728;<code>app</code>&#x4E0A;&#x7684;&#x8DEF;&#x7531;&#x5177;&#x6709;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x65F6;&#x624D;&#x8D77;&#x4F5C;&#x7528;&#x3002;<br>&#x5728;&#x5B9A;&#x4E49;<code>param</code>&#x7684;&#x8DEF;&#x7531;&#x4E0A;&#xFF0C;<code>param</code>&#x56DE;&#x8C03;&#x90FD;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x88AB;&#x8C03;&#x7528;&#x7684;&#xFF0C;&#x5B83;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;-&#x54CD;&#x5E94;&#x5FAA;&#x73AF;&#x4E2D;&#x90FD;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x5E76;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x6B21;&#xFF0C;&#x5373;&#x4F7F;&#x591A;&#x4E2A;&#x8DEF;&#x7531;&#x90FD;&#x5339;&#x914D;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="js">app.param(&apos;id&apos;, function(req, res, next, id) {
    console.log(&apos;CALLED ONLY ONCE&apos;);
    next();
});

app.get(&apos;/user/:id&apos;, function(req, res, next) {
    console.log(&apos;although this matches&apos;);
    next();
});

app.get(&apos;/user/:id&apos;, function(req, res) {
    console.log(&apos;and this mathces too&apos;);
    res.end();
});</code></pre>
<p>&#x5F53;<code>GET /user/42</code>&#xFF0C;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x7ED3;&#x679C;:</p>
<pre><code class="log">    CALLED ONLY ONCE
    although this matches
    and this matches too</code></pre>
<pre><code class="js">app.param([&apos;id&apos;, &apos;page&apos;], function(req, res, next, value) {
    console.log(&apos;CALLED ONLY ONCE with&apos;, value);
    next();
});

app.get(&apos;/user/:id/:page&apos;, function(req. res, next) {
    console.log(&apos;although this matches&apos;);
    next();
});

app.get(&apos;/user/:id/:page&apos;, function (req, res, next) {
    console.log(&apos;and this matches too&apos;);
    res.end();
});
</code></pre>
<p>&#x5F53;&#x6267;&#x884C;<code>GET /user/42/3</code>&#xFF0C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="log">CALLED ONLY ONCE with 42
CALLED ONLY ONCE with 3
although this matches
and this mathes too</code></pre>
<blockquote>
<p>&#x4E0B;&#x9762;&#x7AE0;&#x8282;&#x63CF;&#x8FF0;&#x7684;<code>app.param(callback)</code>&#x5728;v4.11.0&#x4E4B;&#x540E;&#x88AB;&#x5F03;&#x7528;&#x3002;</p>
</blockquote>
<p>&#x901A;&#x8FC7;&#x53EA;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x7ED9;<code>app.param(name, callback)</code>&#x65B9;&#x6CD5;&#xFF0C;<code>app.param(naem, callback)</code>&#x65B9;&#x6CD5;&#x7684;&#x884C;&#x4E3A;&#x5C06;&#x88AB;&#x5B8C;&#x5168;&#x6539;&#x53D8;&#x3002;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x662F;&#x5173;&#x4E8E;<code>app.param(name, callback)</code>&#x8BE5;&#x5177;&#x6709;&#x600E;&#x6837;&#x7684;&#x884C;&#x4E3A;&#x7684;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5E76;&#x4E14;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;<br>&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x9700;&#x8981;&#x6355;&#x83B7;&#x7684;url&#x7684;&#x53C2;&#x6570;&#x540D;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4E00;&#x7684;JavaScript&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x53EF;&#x80FD;&#x5728;&#x5B9E;&#x73B0;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x65F6;&#x88AB;&#x4F7F;&#x7528;&#x3002;<br>&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x51B3;&#x5B9A;&#x4E86;&#x5F53;URL&#x4E2D;&#x5305;&#x542B;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#x6240;&#x91C7;&#x53D6;&#x7684;&#x884C;&#x4E3A;&#x3002;<br>&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>app.param(name, callback)</code>&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x88AB;&#x4FEE;&#x6539;&#x6210;&#x4E86;<code>app.param(name, accessId)</code>&#x3002;&#x66FF;&#x6362;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x540D;&#x548C;&#x56DE;&#x8C03;&#xFF0C;<code>app.param()</code>&#x73B0;&#x5728;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x540D;&#x548C;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x3002;</p>
<pre><code class="js">    var express = require(&apos;express&apos;);
    var app = express();

    app.param(function(param, option){
        return function(req, res, next, val) {
            if (val == option) {
                next();
            }
            else {
                res.sendStatus(403);
            }
        }
    });

    app.param(&apos;id&apos;, 1337);

    app.get(&apos;/user/:id&apos;, function(req, res) {
        res.send(&apos;Ok&apos;);
    });

    app.listen(3000, function() {
        console.log(&apos;Ready&apos;);
    });</code></pre>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>app.param(name, callback)</code>&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x4FDD;&#x6301;&#x548C;&#x539F;&#x6765;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x66FF;&#x6362;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x68C0;&#x6D4B;&#x65B9;&#x6CD5;&#x6765;&#x68C0;&#x6D4B;<code>user id</code>&#x7684;&#x7C7B;&#x578B;&#x6B63;&#x786E;&#x6027;&#x3002;</p>
<pre><code class="js">    app.param(function(param, validator) {
        return function(req, res, next, val) {
            if (validator(val)) {
                next();
            }
            else {
                res.sendStatus(403);
            }
        }
    });

    app.param(&apos;id&apos;, function(candidate) {
        return !isNaN(parseFloat(candidate)) &amp;&amp; isFinite(candidate);
    });</code></pre>
<blockquote>
<p>&#x5728;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;<code>.</code>&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F60;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;<code>/user-.+/</code>&#x6765;&#x6355;&#x83B7;<code>user-gami</code>&#xFF0C;&#x7528;&#x4F7F;&#x7528;<code>[\\s\\S]</code>&#x6216;&#x8005;<code>[\\w\\&gt;W]</code>&#x6765;&#x4EE3;&#x66FF;(&#x6B63;&#x5982;<code>/user-[\\s\\S]+/</code>)&#x3002;</p>
<pre><code class="js">//captures &apos;1-a_6&apos; but not &apos;543-azser-sder&apos;
router.get(&apos;/[0-9]+-[[\\w]]*&apos;, function);</code></pre>
</blockquote>
<blockquote>
<p>//captures &#x2018;1-a_6&#x2019; and &#x2018;543-az(ser&#x201D;-sder&#x2019; but not &#x2018;5-a s&#x2019;<br>router.get(&#x2018;/[0-9]+-[[\S]]*&#x2019;, function);</p>
</blockquote>
<blockquote>
<p>//captures all (equivalent to &#x2018;.<em>&#x2018;)<br>router.get(&#x2018;[[\s\S]]</em>&#x2018;, function);</p>
<pre><code></code></pre></blockquote>
<h4 id="app-path"><a href="#app-path" class="headerlink" title="app.path()"></a>app.path()</h4><p>&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5F97;&#x5230;<code>app</code>&#x5178;&#x578B;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x5176;&#x662F;&#x4E00;&#x4E2A;<code>string</code>&#x3002;</p>
<pre><code class="js">    var app = express()
      , blog = express()
      , blogAdmin = express();

    app.use(&apos;/blog&apos;, blog);
    app.use(&apos;/admin&apos;, blogAdmin);

    console.log(app.path()); // &apos;&apos;
    console.log(blog.path()); // &apos;/blog&apos;
    console.log(blogAdmin.path()); // &apos;/blog/admin&apos;</code></pre>
<p>&#x5982;&#x679C;<code>app</code>&#x6302;&#x8F7D;&#x5F88;&#x590D;&#x6742;&#x4E0B;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x884C;&#x4E3A;&#x4E5F;&#x4F1A;&#x5F88;&#x590D;&#x6742;&#xFF1A;&#x4E00;&#x79CD;&#x66F4;&#x597D;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528;<code>req.baseUrl</code>&#x6765;&#x83B7;&#x5F97;&#x8FD9;&#x4E2A;app&#x7684;&#x5178;&#x578B;&#x8DEF;&#x5F84;&#x3002;</p>
<h4 id="app-post-path-callback-callback-&#x2026;"><a href="#app-post-path-callback-callback-&#x2026;" class="headerlink" title="app.post(path, callback, [callback &#x2026;])"></a>app.post(path, callback, [callback &#x2026;])</h4><p>&#x8DEF;&#x7531;<code>HTTP POST</code>&#x8BF7;&#x6C42;&#x5230;&#x6709;&#x7279;&#x6B8A;&#x56DE;&#x8C03;&#x7684;&#x7279;&#x6B8A;&#x8DEF;&#x5F84;&#x3002;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/guide/routing.html" target="_blank" rel="noopener">routing guide</a>&#x3002;<br>&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>next(&apos;router&apos;)</code>&#x6765;&#x7ED5;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6CA1;&#x80FD;&#x6EE1;&#x8DB3;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="js">    app.post(&apos;/&apos;, function(req, res) {
        res.send(&apos;POST request to homepage&apos;)
    });</code></pre>
<h4 id="app-put-path-callback-callback-&#x2026;"><a href="#app-put-path-callback-callback-&#x2026;" class="headerlink" title="app.put(path, callback, [callback &#x2026;])"></a>app.put(path, callback, [callback &#x2026;])</h4><p>&#x8DEF;&#x7531;<code>HTTP PUT</code>&#x8BF7;&#x6C42;&#x5230;&#x6709;&#x7279;&#x6B8A;&#x56DE;&#x8C03;&#x7684;&#x7279;&#x6B8A;&#x8DEF;&#x5F84;&#x3002;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/guide/routing.html" target="_blank" rel="noopener">routing guide</a>&#x3002;<br>&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>next(&apos;router&apos;)</code>&#x6765;&#x7ED5;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6CA1;&#x80FD;&#x6EE1;&#x8DB3;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="js">    app.put(&apos;/&apos;, function(req, res) {
        res.send(&apos;PUT request to homepage&apos;);
    });</code></pre>
<h4 id="app-render-view-locals-callback"><a href="#app-render-view-locals-callback" class="headerlink" title="app.render(view, [locals], callback)"></a>app.render(view, [locals], callback)</h4><p>&#x901A;&#x8FC7;<code>callback</code>&#x56DE;&#x8C03;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>view</code>&#x6E32;&#x67D3;&#x4E4B;&#x540E;&#x5F97;&#x5230;&#x7684;HTML&#x6587;&#x672C;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x9009;&#x53C2;&#x6570;&#x5305;&#x542B;&#x4E86;&#x8FD9;&#x4E2A;<code>view</code>&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x672C;&#x5730;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#x4E8E;<code>res.render()</code>&#xFF0C;&#x9664;&#x4E86;&#x5B83;&#x4E0D;&#x80FD;&#x628A;&#x6E32;&#x67D3;&#x5F97;&#x5230;&#x7684;HTML&#x6587;&#x672C;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
<blockquote>
<p>&#x5C06;<code>app.render()</code>&#x5F53;&#x4F5C;&#x662F;&#x53EF;&#x4EE5;&#x751F;&#x6210;&#x6E32;&#x67D3;&#x89C6;&#x56FE;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x3002;&#x5728;<code>res.render()</code>&#x5185;&#x90E8;&#xFF0C;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x7684;<code>app.render()</code>&#x6765;&#x6E32;&#x67D3;&#x89C6;&#x56FE;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x5982;&#x679C;&#x4F7F;&#x80FD;&#x4E86;&#x89C6;&#x56FE;&#x7F13;&#x5B58;&#xFF0C;&#x90A3;&#x4E48;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x7F13;&#x5B58;&#x5C31;&#x4F1A;&#x4FDD;&#x7559;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x7F13;&#x5B58;&#x89C6;&#x56FE;&#xFF0C;&#x8BBE;&#x7F6E;&#x5B83;&#x4E3A;<code>true</code>&#x3002;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x89C6;&#x56FE;&#x7F13;&#x5B58;&#x9ED8;&#x8BA4;&#x662F;&#x6253;&#x5F00;&#x7684;&#x3002;</p>
</blockquote>
<pre><code class="js">    app.render(&apos;email&apos;, function(err, html) {
    // ...
    });

    app.render(&apos;email&apos;, {name:&apos;Tobi&apos;}, function(err, html) {
    // ...
    });</code></pre>
<h4 id="app-route-path"><a href="#app-route-path" class="headerlink" title="app.route(path)"></a>app.route(path)</h4><p>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x8DEF;&#x7531;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x4E4B;&#x540E;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4E0A;&#x65BD;&#x52A0;&#x5404;&#x79CD;HTTP&#x52A8;&#x4F5C;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x4F7F;&#x7528;<code>app.route()</code>&#x6765;&#x907F;&#x514D;&#x91CD;&#x590D;&#x8DEF;&#x7531;&#x540D;&#x5B57;(&#x56E0;&#x6B64;&#x9519;&#x5B57;&#x9519;&#x8BEF;)&#x2013;&#x8BF4;&#x7684;&#x610F;&#x601D;&#x5E94;&#x8BE5;&#x662F;&#x4F7F;&#x7528;<code>app.router()</code>&#x8FD9;&#x4E2A;&#x5355;&#x4F8B;&#x65B9;&#x6CD5;&#x6765;&#x907F;&#x514D;&#x540C;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x591A;&#x4E2A;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x3002;</p>
<pre><code class="js">var app = express();

app.route(&apos;/events&apos;)
.all(function(req, res, next) {
  // runs for all HTTP verbs first
  // think of it as route specific middleware!
})
.get(function(req, res, next) {
  res.json(...);
})
.post(function(req, res, next) {
  // maybe add a new event...
})
</code></pre>
<h4 id="app-set-name-value"><a href="#app-set-name-value" class="headerlink" title="app.set(name, value)"></a>app.set(name, value)</h4><p>&#x7ED9;<code>name</code>&#x8BBE;&#x7F6E;&#x9879;&#x8D4B;<code>value</code>&#x503C;&#xFF0C;<code>name</code>&#x662F;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">app settings table</a>&#x4E2D;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x9879;&#x3002;<br>&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x662F;&#x5E03;&#x5C14;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8C03;&#x7528;<code>app.set(&apos;foo&apos;, ture)</code>&#x7B49;&#x4EF7;&#x4E8E;&#x8C03;&#x7528;<code>app.enable(&apos;foo&apos;)</code>&#x3002;&#x540C;&#x6837;&#x7684;&#xFF0C;&#x8C03;&#x7528;<code>app.set(&apos;foo&apos;, false)</code>&#x7B49;&#x4EF7;&#x4E8E;&#x8C03;&#x7528;<code>app.disable(&apos;foo&apos;)</code>&#x3002;<br>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>app.get()</code>&#x6765;&#x53D6;&#x5F97;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#xFF1A;</p>
<pre><code class="js">    app.set(&apos;title&apos;, &apos;My Site&apos;);
    app.get(&apos;title&apos;); // &apos;My Site&apos;</code></pre>
<p><strong>Application Settings</strong><br>&#x5982;&#x679C;<code>name</code>&#x662F;&#x7A0B;&#x5E8F;&#x8BBE;&#x7F6E;&#x4E4B;&#x4E00;&#xFF0C;&#x5B83;&#x5C06;&#x5F71;&#x54CD;&#x5230;&#x7A0B;&#x5E8F;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x4E0B;&#x8FB9;&#x5217;&#x51FA;&#x4E86;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x8BBE;&#x7F6E;&#x3002;<br>|Property|Type|Value|Default|<br>|:&#x2014;:|:&#x2014;:|:&#x2014;:|:&#x2014;:|<br>|case sensitive routing|Boolean|&#x542F;&#x7528;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x3002;|&#x4E0D;&#x542F;&#x7528;&#x3002;&#x5BF9;<code>/Foo</code>&#x548C;<code>/foo</code>&#x5904;&#x7406;&#x662F;&#x4E00;&#x6837;&#x3002;|<br>|env|String|&#x73AF;&#x5883;&#x6A21;&#x578B;&#x3002;|process.env.NODE_ENV(NODE_ENV&#x73AF;&#x5883;&#x53D8;&#x91CF;)&#x6216;&#x8005;&#x201D;development&#x201D;|<br>|etag|Varied|&#x8BBE;&#x7F6E;<code>ETag</code>&#x54CD;&#x5E94;&#x5934;&#x3002;&#x53EF;&#x53D6;&#x7684;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/4x/api.html#etag.options.table" target="_blank" rel="noopener">etag options table</a>&#x3002;&#x66F4;&#x591A;&#x5173;&#x4E8E;<a href="http://en.wikipedia.org/wiki/HTTP_ETag" target="_blank" rel="noopener">HTTP ETag header</a>&#x3002;|weak|<br>|jsonp callback name|String|&#x6307;&#x5B9A;&#x9ED8;&#x8BA4;JSONP&#x56DE;&#x8C03;&#x7684;&#x540D;&#x79F0;&#x3002;|?callback=|<br>|json replacer|String|JSON&#x66FF;&#x4EE3;&#x54C1;&#x56DE;&#x8C03;|null|<br>|json spaces|Number|&#x5F53;&#x8BBE;&#x7F6E;&#x4E86;&#x8FD9;&#x4E2A;&#x503C;&#x540E;&#xFF0C;&#x53D1;&#x9001;&#x7F29;&#x8FDB;&#x7A7A;&#x683C;&#x7F8E;&#x5316;&#x8FC7;&#x7684;JSON&#x5B57;&#x7B26;&#x4E32;&#x3002;|Disabled|<br>|query parser|Varied|&#x8BBE;&#x7F6E;&#x503C;&#x4E3A;<code>false</code>&#x6765;&#x7981;&#x7528;<code>query parser</code>&#xFF0C;&#x6216;&#x8005;&#x8BBE;&#x7F6E;<code>simple</code>,<code>extended</code>&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;<code>query string</code>&#x89E3;&#x6790;&#x51FD;&#x6570;&#x3002;<code>simple</code>&#x57FA;&#x4E8E;<code>Node</code>&#x539F;&#x751F;&#x7684;<code>query</code>&#x89E3;&#x6790;&#xFF0C;<a href="http://nodejs.org/api/querystring.html" target="_blank" rel="noopener">querystring</a>&#x3002;|&#x201D;extend&#x201D;|<br>|strict routing|Boolean|&#x542F;&#x7528;&#x4E25;&#x683C;&#x7684;&#x8DEF;&#x7531;&#x3002;|&#x4E0D;&#x542F;&#x7528;&#x3002;&#x5BF9;<code>/foo</code>&#x548C;<code>/foo/</code>&#x7684;&#x8DEF;&#x7531;&#x5904;&#x7406;&#x662F;&#x4E00;&#x6837;&#x3002;|<br>|subdomain offset|Number|&#x7528;&#x6765;&#x5220;&#x9664;&#x8BBF;&#x95EE;&#x5B50;&#x57DF;&#x7684;&#x4E3B;&#x673A;&#x70B9;&#x5206;&#x90E8;&#x5206;&#x7684;&#x4E2A;&#x6570;|2|<br>|trust proxy|Varied|&#x6307;&#x793A;<code>app</code>&#x5728;&#x4E00;&#x4E2A;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x7684;&#x540E;&#x9762;&#xFF0C;&#x4F7F;&#x7528;<code>x-Forwarded-*</code>&#x6765;&#x786E;&#x5B9A;&#x8FDE;&#x63A5;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#x5730;&#x5740;&#x3002;&#x6CE8;&#x610F;:<code>X-Forwarded-*</code>&#x5934;&#x90E8;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x6B3A;&#x9A97;&#xFF0C;&#x6240;&#x6709;&#x68C0;&#x6D4B;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#x5730;&#x5740;&#x662F;&#x9760;&#x4E0D;&#x4F4F;&#x7684;&#x3002;<code>trust proxy</code>&#x9ED8;&#x8BA4;&#x4E0D;&#x542F;&#x7528;&#x3002;&#x5F53;&#x542F;&#x7528;&#x65F6;&#xFF0C;Express&#x5C1D;&#x8BD5;&#x901A;&#x8FC7;&#x524D;&#x7AEF;&#x4EE3;&#x7406;&#x6216;&#x8005;&#x4E00;&#x7CFB;&#x5217;&#x4EE3;&#x7406;&#x6765;&#x83B7;&#x53D6;&#x5DF2;&#x8FDE;&#x63A5;&#x7684;&#x5BA2;&#x6237;&#x7AEF;IP&#x5730;&#x5740;&#x3002;<code>req.ips</code>&#x5C5E;&#x6027;&#x5305;&#x542B;&#x4E86;&#x5DF2;&#x8FDE;&#x63A5;&#x5BA2;&#x6237;&#x7AEF;IP&#x5730;&#x5740;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x4E3A;&#x4E86;&#x542F;&#x52A8;&#x5B83;&#xFF0C;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x5728;&#x4E0B;&#x9762;<a href="http://expressjs.com/4x/api.html#trust.proxy.options.table" target="_blank" rel="noopener">trust proxy options table</a>&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x503C;&#x3002;<code>trust proxy</code>&#x7684;&#x8BBE;&#x7F6E;&#x5B9E;&#x73B0;&#x4F7F;&#x7528;&#x4E86;<code>proxy-addr</code>&#x5305;&#x3002;&#x5982;&#x679C;&#x60F3;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;&#x5B83;&#x7684;&#x6587;&#x6863;|Disable|<br>|views|String or Array|<code>view</code>&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x6216;&#x8005;&#x76EE;&#x5F55;&#x6570;&#x7EC4;&#x3002;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;&#x6309;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x67E5;&#x627E;<code>view</code>&#x3002;|process.cwd() + &#x2018;/views&#x2019;|<br>|view cache|Boolean|&#x542F;&#x7528;&#x89C6;&#x56FE;&#x6A21;&#x677F;&#x7F16;&#x8BD1;&#x7F13;&#x5B58;&#x3002;|&#x5728;&#x751F;&#x6210;&#x73AF;&#x5883;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x3002;|<br>|view engine|String|&#x7701;&#x7565;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x5F15;&#x64CE;&#x88AB;&#x6269;&#x5C55;&#x4F7F;&#x7528;&#x3002;||<br>|x-powered-by|Boolean|&#x542F;&#x7528;<code>X-Powered-By:Express</code>HTTP&#x5934;&#x90E8;|true|</p>
<p><strong>Options for <code>trust proxy</code> settings</strong><br>&#x67E5;&#x9605;<a href="http://expressjs.com/guide/behind-proxies.html" target="_blank" rel="noopener">Express behind proxies</a>&#x6765;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</p>
<table>
<thead><tr><th>Type</th><th>Value</th></tr></thead>
<tbody>
<tr>
<td>Boolean</td>
<td>
<p>&#x5982;&#x679C;&#x4E3A;<code>true</code>&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#x5730;&#x5740;&#x4F5C;&#x4E3A;<code>X-Forwarded-*</code>&#x5934;&#x90E8;&#x7684;&#x6700;&#x5DE6;&#x8FB9;&#x7684;&#x6761;&#x76EE;&#x3002;&#x5982;&#x679C;&#x4E3A;<code>false</code>&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;<code>app</code>&#x76F4;&#x63A5;&#x4E0E;&#x82F1;&#x7279;&#x7F51;&#x76F4;&#x8FDE;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IP&#x5730;&#x5740;&#x884D;&#x751F;&#x81EA;<code>req.connection.remoteAddress</code>&#x3002;<code>false</code>&#x662F;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x3002;</p>
</td>
</tr>
<tr>
<td>IP addresses</td>
<td>
<p>&#x4E00;&#x4E2A;IP&#x5730;&#x5740;&#xFF0C;&#x5B50;&#x7F51;&#xFF0C;&#x6216;&#x8005;&#x4E00;&#x7EC4;IP&#x5730;&#x5740;&#xFF0C;&#x548C;&#x59D4;&#x6258;&#x5B50;&#x7F51;&#x3002;&#x4E0B;&#x9762;&#x5217;&#x51FA;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x9884;&#x5148;&#x914D;&#x7F6E;&#x7684;&#x5B50;&#x7F51;&#x540D;&#x5217;&#x8868;&#x3002;</p>
<ul>
<li>loopback - <code>127.0.0.1/8</code>, <code>::1/128</code></li>
<li>linklocal - <code>169.254.0.0/16</code>, <code>fe80::/10</code></li>
<li>uniquelocal - <code>10.0.0.0/8</code>, <code>172.16.0.0/12</code>, <code>192.168.0.0/16</code>, <code>fc00::/7</code></li>
</ul>
<p>&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x6765;&#x8BBE;&#x7F6E;IP&#x5730;&#x5740;:</p>
<pre class="  language-javascript"><code class="  language-javascript">app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;trust proxy&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;loopback&apos;</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// specify a single subnet
</span>  app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;trust proxy&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;loopback, 123.123.123.123&apos;</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// specify a subnet and an address
</span>  app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;trust proxy&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;loopback, linklocal, uniquelocal&apos;</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// specify multiple subnets as CSV
</span>  app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;trust proxy&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;loopback&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;linklocal&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;uniquelocal&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// specify multiple subnets as an array</span></code></pre>
<p>&#x5F53;&#x6307;&#x5B9A;IP&#x5730;&#x5740;&#x4E4B;&#x540E;, &#x8FD9;&#x4E2A;IP&#x5730;&#x5740;&#x6216;&#x5B50;&#x7F51;&#x4F1A;&#x88AB;&#x8BBE;&#x7F6E;&#x4E86;&#x8FD9;&#x4E2A;IP&#x5730;&#x5740;&#x6216;&#x5B50;&#x7F51;&#x7684;`app`&#x6392;&#x9664;&#x5728;&#x5916;, &#x6700;&#x9760;&#x8FD1;&#x7A0B;&#x5E8F;&#x670D;&#x52A1;&#x7684;&#x6CA1;&#x6709;&#x59D4;&#x6258;&#x7684;&#x5730;&#x5740;&#x5C06;&#x88AB;&#x770B;&#x505A;&#x5BA2;&#x6237;&#x7AEF;IP&#x5730;&#x5740;&#x3002;</p>
</td>
</tr>
<tr>
<td>Number</td>
<td>
<p>&#x4FE1;&#x4EFB;&#x4ECE;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x5230;app&#x4E2D;&#x95F4;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;n&#x8DF3;&#x7684;&#x8FDE;&#x63A5;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
</td>
</tr>
<tr>
<td>Function</td>
<td>
<p>&#x5BA2;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x59D4;&#x6258;&#x4EE3;&#x7406;&#x4FE1;&#x4EFB;&#x673A;&#x5236;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x4F60;&#x81EA;&#x5DF1;&#x77E5;&#x9053;&#x4F60;&#x5728;&#x5E72;&#x4EC0;&#x4E48;&#x3002;</p>
<pre class="  language-javascript"><code class="  language-javascript">app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;trust proxy&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>ip<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ip <span class="token operator">===</span> <span class="token string">&apos;127.0.0.1&apos;</span> <span class="token operator">||</span> ip <span class="token operator">===</span> <span class="token string">&apos;123.123.123.123&apos;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// trusted IPs
</span>    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</td>
</tr>
</tbody>
</table>

<p><strong>Options for <code>etag</code> settings</strong><br><code>ETag</code>&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0;&#x4F7F;&#x7528;&#x4E86;<a href="https://www.npmjs.org/package/etag" target="_blank" rel="noopener">etag</a>&#x5305;&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x9605;&#x5B83;&#x7684;&#x6587;&#x6863;&#x3002;</p>
<table>
<thead><tr><th>Type</th><th>Value</th></tr></thead>
<tbody>
<tr>
<td>Boolean</td>
<td>
<p>&#x8BBE;&#x7F6E;&#x4E3A;<code>true</code>&#xFF0C;&#x542F;&#x7528;weak ETag&#x3002;&#x8FD9;&#x4E2A;&#x662F;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x3002;&#x8BBE;&#x7F6E;<code>false</code>&#xFF0C;&#x7981;&#x7528;&#x6240;&#x6709;&#x7684;ETag&#x3002;<br>
</p></td>
</tr>
<tr>
<td>String</td>
<td>
&#x5982;&#x679C;&#x662F;<code>strong</code>&#xFF0C;&#x4F7F;&#x80FD;strong ETag&#x3002;&#x5982;&#x679C;&#x662F;<code>weak</code>&#xFF0C;&#x542F;&#x7528;<code>weak</code> ETag&#x3002;
</td>
</tr>
<tr>
<td>Function</td>
<td>
<p>&#x5BA2;&#x6237;&#x81EA;&#x5B9A;&#x4E49;`ETag`&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;. &#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x4F60;&#x81EA;&#x5DF1;&#x77E5;&#x9053;&#x4F60;&#x5728;&#x5E72;&#x4EC0;&#x4E48;&#x3002;</p>
<pre class="  language-javascript"><code class="  language-javascript">app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&apos;etag&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>body<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">generateHash<span class="token punctuation">(</span></span>body<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// consider the function is defined
</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</td>
</tr>
</tbody>
</table>

<h4 id="app-use-path-function-function&#x2026;"><a href="#app-use-path-function-function&#x2026;" class="headerlink" title="app.use([path,], function [, function&#x2026;])"></a>app.use([path,], function [, function&#x2026;])</h4><p>&#x6302;&#x8F7D;<a href="http://expressjs.com/guide/using-middleware.html" target="_blank" rel="noopener">&#x4E2D;&#x95F4;&#x4EF6;</a>&#x65B9;&#x6CD5;&#x5230;&#x8DEF;&#x5F84;&#x4E0A;&#x3002;&#x5982;&#x679C;&#x8DEF;&#x5F84;&#x672A;&#x6307;&#x5B9A;&#xFF0C;&#x90A3;&#x4E48;&#x9ED8;&#x8BA4;&#x4E3A;&#x201D;/&#x201C;&#x3002;</p>
<blockquote>
<p>&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x5C06;&#x5339;&#x914D;&#x4EFB;&#x4F55;&#x8DEF;&#x5F84;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x8DEF;&#x5F84;&#x4EE5;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x8DEF;&#x5F84;&#x540E;&#x7D27;&#x8DDF;&#x7740;&#x201D;/&#x201C;&#x3002;&#x6BD4;&#x5982;&#xFF1A;<code>app.use(&apos;/appale&apos;, ...)</code>&#x5C06;&#x5339;&#x914D;&#x201D;/apple&#x201D;&#xFF0C;&#x201D;/apple/images&#x201D;&#xFF0C;&#x201D;/apple/images/news&#x201D;&#x7B49;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x4E2D;&#x95F4;&#x4EF6;&#x4E2D;&#x7684;<code>req.originalUrl</code>&#x662F;<code>req.baseUrl</code>&#x548C;<code>req.path</code>&#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x6240;&#x793A;&#x3002;</p>
<pre><code class="js">app.use(&apos;/admin&apos;, function(req, res, next) {
// GET &apos;http://www.example.com/admin/new&apos;
console.log(req.originalUrl); // &apos;/admin/new&apos;
console.log(req.baseUrl); // &apos;/admin&apos;
console.log(req.path);// &apos;/new&apos;
});</code></pre>
</blockquote>
<p>&#x5728;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x4E0A;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x4E4B;&#x540E;&#xFF0C;&#x6BCF;&#x5F53;&#x8BF7;&#x6C42;&#x7684;&#x8DEF;&#x5F84;&#x7684;&#x524D;&#x7F00;&#x90E8;&#x5206;&#x5339;&#x914D;&#x4E86;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x8DEF;&#x5F84;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x5C31;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x3002;<br>&#x7531;&#x4E8E;&#x9ED8;&#x8BA4;&#x7684;&#x8DEF;&#x5F84;&#x4E3A;<code>/</code>&#xFF0C;&#x4E2D;&#x95F4;&#x4EF6;&#x6302;&#x8F7D;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x90FD;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x3002;</p>
<pre><code class="js">    // this middleware will be executed for every request to the app.
    app.use(function(req, res, next) {
        console.log(&apos;Time: %d&apos;, Date.now());
        next();
    });</code></pre>
<p>&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#x662F;&#x987A;&#x5E8F;&#x5904;&#x7406;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E2D;&#x95F4;&#x4EF6;&#x5305;&#x542B;&#x7684;&#x987A;&#x5E8F;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x3002;</p>
<pre><code class="js">    // this middleware will not allow the request to  go beyond it
    app.use(function(req, res, next) {
        res.send(&apos;Hello World&apos;);
    });

    // this middleware will never reach this route
    app.use(&apos;/&apos;, function(req, res) {
        res.send(&apos;Welcome&apos;);
    });
</code></pre>
<p>&#x8DEF;&#x5F84;&#x53EF;&#x4EE5;&#x662F;&#x4EE3;&#x8868;&#x8DEF;&#x5F84;&#x7684;&#x4E00;&#x4E32;&#x5B57;&#x7B26;&#xFF0C;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#xFF0C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x8DEF;&#x5F84;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x6216;&#x8005;&#x4ED6;&#x4EEC;&#x7684;&#x4E00;&#x7EC4;&#x96C6;&#x5408;&#x3002;</p>
<blockquote>
<p>&#x4E0B;&#x9762;&#x662F;&#x8DEF;&#x5F84;&#x7684;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
</blockquote>
<table>
<thead>
<tr>
<th> Type </th>
<th> Example </th>
</tr>
</thead>
<tbody>
<tr>
<td>Path</td>
<td>
<pre class="  language-javascript"><code class="  language-javascript"><span class="token comment" spellcheck="true">// will match paths starting with /abcd
</span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token string">&apos;/abcd&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</td>
</tr>
<tr>
<td>Path Pattern</td>
<td>
<pre class="  language-javascript"><code class="  language-javascript"><span class="token comment" spellcheck="true">// will match paths starting with /abcd and /abd
</span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token string">&apos;/abc?d&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<p><span class="token comment" spellcheck="true">// will match paths starting with /abcd, /abbcd, /abbbbbcd and so on<br></span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token string">&#x2018;/ab+cd&#x2019;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></p>
<p><span class="token comment" spellcheck="true">// will match paths starting with /abcd, /abxcd, /abFOOcd, /abbArcd and so on<br></span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token string">&#x2018;/ab*cd&#x2019;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></p>
<p><span class="token comment" spellcheck="true">// will match paths starting with /ad and /abcd<br></span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token string">&#x2018;/a(bc)?d&#x2019;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></p></code></pre><p></p>
</td>
</tr>
<tr>
<td>Regular Expression</td>
<td>
<pre class="  language-javascript"><code class="  language-javascript"><span class="token comment" spellcheck="true">// will match paths starting with /abc and /xyz
</span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token regex">/\/abc|\/xyz/</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</td>
</tr>
<tr>
<td>Array</td>
<td>
<pre class="  language-javascript"><code class="  language-javascript"><span class="token comment" spellcheck="true">// will match paths starting with /abcd, /xyza, /lmn, and /pqr
</span>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token punctuation">[</span><span class="token string">&apos;/abcd&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;/xyza&apos;</span><span class="token punctuation">,</span> <span class="token operator">/</span>\<span class="token operator">/</span>lmn<span class="token operator">|</span>\<span class="token operator">/</span>pqr<span class="token operator">/</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
</td>
</tr>
</tbody>
</table>

<p>&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x7CFB;&#x5217;&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x7EC4;&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4ED6;&#x4EEC;&#x7684;&#x96C6;&#x5408;&#x3002;&#x7531;&#x4E8E;<code>router</code>&#x548C;<code>app</code>&#x5B9E;&#x73B0;&#x4E86;&#x4E2D;&#x95F4;&#x4EF6;&#x63A5;&#x53E3;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x50CF;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x4EFB;&#x4E00;&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#x90A3;&#x6837;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x3002;</p>
<table>
<thead>
<tr>
<th>Usage</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x5355;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;</td>
<td>&#x4F60;&#x53EF;&#x4EE5;&#x5C40;&#x90E8;&#x5B9A;&#x4E49;&#x548C;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;
<pre class="  language-javascript"><code class="  language-javascript">app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
&#x4E00;&#x4E2A;<code>router</code>&#x662F;&#x6709;&#x6548;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;
<pre class="  language-javascript"><code class="  language-javascript"><span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span>router<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
&#x4E00;&#x4E2A;<code>Express</code>&#x7A0B;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;
<pre class="  language-javascript"><code class="  language-javascript"><span class="token keyword">var</span> subApp <span class="token operator">=</span> <span class="token function">express<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subApp<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span>subApp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</td>
</tr>
<tr>
<td>&#x4E00;&#x7CFB;&#x5217;&#x4E2D;&#x95F4;&#x4EF6;</td>
<td>
&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x76F8;&#x540C;&#x7684;&#x6302;&#x8F7D;&#x8DEF;&#x5F84;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6302;&#x8F7D;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;
<pre class="  language-javascript"><code class="  language-javascript"><span class="token keyword">var</span> r1 <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
r1<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<p><span class="token keyword">var</span> r2 <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>r2<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&#x2018;/&#x2018;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></p>
<p>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span>r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">;</span><br></p></code></pre><p></p>
</td>
</tr>
<tr>
<td>&#x4E00;&#x7EC4;&#x4E2D;&#x95F4;&#x4EF6;</td>
<td>
&#x5728;&#x903B;&#x8F91;&#x4E0A;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x6765;&#x7EC4;&#x7EC7;&#x4E00;&#x7EC4;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4F20;&#x9012;&#x4E00;&#x7EC4;&#x4E2D;&#x95F4;&#x4EF6;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x552F;&#x4E00;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x63A5;&#x7740;&#x4F60;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x6302;&#x8F7D;&#x7684;&#x8DEF;&#x5F84;&#x3002;
<pre class="  language-javascript"><code class="  language-javascript"><span class="token keyword">var</span> r1 <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
r1<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<p><span class="token keyword">var</span> r2 <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>r2<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&#x2018;/&#x2018;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></p>
<p>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span><span class="token string">&#x2018;/&#x2018;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>r1<span class="token punctuation">,</span> r2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></p></code></pre><p></p>
</td>
</tr>
<tr>
<td>&#x7EC4;&#x5408;</td>
<td>
&#x4F60;&#x53EF;&#x4EE5;&#x7EC4;&#x5408;&#x4E0B;&#x9762;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x6765;&#x6302;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;
<pre class="  language-javascript"><code class="  language-javascript"><span class="token keyword">function</span> <span class="token function">mw1<span class="token punctuation">(</span></span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">mw2<span class="token punctuation">(</span></span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<p><span class="token keyword">var</span> r1 <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>r1<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&#x2018;/&#x2018;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></p>
<p><span class="token keyword">var</span> r2 <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>r2<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&#x2018;/&#x2018;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></p>
<p><span class="token keyword">var</span> subApp <span class="token operator">=</span> <span class="token function">express<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>subApp<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&#x2018;/&#x2018;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">next<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></p>
<p>app<span class="token punctuation">.</span><span class="token function">use<span class="token punctuation">(</span></span>mw1<span class="token punctuation">,</span> <span class="token punctuation">[</span>mw2<span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">]</span><span class="token punctuation">,</span> subApp<span class="token punctuation">)</span><span class="token punctuation">;</span><br></p></code></pre><p></p>
</td>
</tr>
</tbody>
</table>

<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;&#xFF0C;&#x5728;<code>Express</code>&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;<code>express.static</code>&#x4E2D;&#x95F4;&#x4EF6;&#x3002;<br>&#x4E3A;&#x7A0B;&#x5E8F;&#x6258;&#x7BA1;&#x4F4D;&#x4E8E;&#x7A0B;&#x5E8F;&#x76EE;&#x5F55;&#x4E0B;&#x7684;<code>public</code>&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF1A;</p>
<pre><code class="js">// GET /style.css etc
app.use(express.static(__dirname + &apos;/public&apos;));</code></pre>
<p>&#x5728;<code>/static</code>&#x8DEF;&#x5F84;&#x4E0B;&#x6302;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x63D0;&#x4F9B;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6258;&#x7BA1;&#x670D;&#x52A1;&#xFF0C;&#x53EA;&#x5F53;&#x8BF7;&#x6C42;&#x662F;&#x4EE5;<code>/static</code>&#x4E3A;&#x524D;&#x7F00;&#x7684;&#x65F6;&#x5019;&#x3002;</p>
<pre><code class="js">// GET /static/style.css etc.
app.use(&apos;/static&apos;, express.static(express.__dirname + &apos;/public&apos;));</code></pre>
<p>&#x901A;&#x8FC7;&#x5728;&#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4E2D;&#x95F4;&#x4EF6;&#x4E4B;&#x540E;&#x52A0;&#x8F7D;&#x65E5;&#x5FD7;&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x5173;&#x95ED;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x8BF7;&#x6C42;&#x7684;&#x65E5;&#x5FD7;&#x3002;</p>
<pre><code class="js">    app.use(express.static(__dirname + &apos;/public&apos;));
    app.use(logger());</code></pre>
<p>&#x6258;&#x7BA1;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4ECE;&#x4E0D;&#x540C;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x4F46;<code>./public</code>&#x8DEF;&#x5F84;&#x6BD4;&#x5176;&#x4ED6;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x5339;&#x914D;&#xFF1A;</p>
<pre><code class="js">app.use(express.static(__dirname + &apos;/public&apos;));
app.use(express.static(__dirname + &apos;/files&apos;));
app.use(express.static(__dirname + &apos;/uploads&apos;));</code></pre>
<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><p><code>req</code>&#x5BF9;&#x8C61;&#x4EE3;&#x8868;&#x4E86;&#x4E00;&#x4E2A;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x5176;&#x5177;&#x6709;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;&#x6765;&#x4FDD;&#x5B58;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x6BD4;&#x5982;<code>query string</code>&#xFF0C;<code>parameters</code>&#xFF0C;<code>body</code>&#xFF0C;<code>HTTP headers</code>&#x7B49;&#x7B49;&#x3002;&#x5728;&#x672C;&#x6587;&#x6863;&#x4E2D;&#xFF0C;&#x6309;&#x7167;&#x60EF;&#x4F8B;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x603B;&#x662F;&#x7B80;&#x79F0;&#x4E3A;<code>req</code>(http&#x54CD;&#x5E94;&#x7B80;&#x79F0;&#x4E3A;<code>res</code>)&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x5B9E;&#x9645;&#x7684;&#x540D;&#x5B57;&#x7531;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x5728;&#x90A3;&#x91CC;&#x4F7F;&#x7528;&#x65F6;&#x7684;&#x53C2;&#x6570;&#x51B3;&#x5B9A;&#x3002;<br>&#x5982;&#x4E0B;&#x4F8B;&#x5B50;:</p>
<pre><code class="js">    app.get(&apos;/user/:id&apos;, function(req, res) {
        res.send(&apos;user&apos; + req.params.id);
    });</code></pre>
<p>&#x5176;&#x5B9E;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5199;&#xFF1A;</p>
<pre><code class="js">    app.get(&apos;/user/:id&apos;, function(request, response) {
        response.send(&apos;user&apos; + request.params.id);
    });</code></pre>
<h3 id="Properties-1"><a href="#Properties-1" class="headerlink" title="Properties"></a>Properties</h3><p>&#x5728;<code>Express 4</code>&#x4E2D;&#xFF0C;<code>req.files</code>&#x9ED8;&#x8BA4;&#x5728;<code>req</code>&#x5BF9;&#x8C61;&#x4E2D;&#x4E0D;&#x518D;&#x662F;&#x53EF;&#x7528;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x901A;&#x8FC7;<code>req.files</code>&#x5BF9;&#x8C61;&#x6765;&#x83B7;&#x5F97;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;<code>multipart-handling</code>(&#x591A;&#x79CD;&#x5904;&#x7406;&#x7684;&#x5DE5;&#x5177;&#x96C6;)&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;<code>busboy</code>&#xFF0C;<code>multer</code>&#xFF0C;<code>formidable</code>&#xFF0C;<code>multipraty</code>&#xFF0C;<code>connect-multiparty</code>&#x6216;&#x8005;<code>pez</code>&#x3002;</p>
<h4 id="req-app"><a href="#req-app" class="headerlink" title="req.app"></a>req.app</h4><p>&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x6301;&#x6709;<code>express</code>&#x7A0B;&#x5E8F;&#x5B9E;&#x4F8B;&#x7684;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#xFF0C;&#x5176;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x4E2D;&#x95F4;&#x4EF6;&#x4F7F;&#x7528;&#x3002;<br>&#x5982;&#x679C;&#x4F60;&#x6309;&#x7167;&#x8FD9;&#x4E2A;&#x6A21;&#x5F0F;&#xFF0C;&#x4F60;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x5BFC;&#x51FA;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x53EA;&#x5728;&#x4F60;&#x7684;&#x4E3B;&#x6587;&#x4EF6;&#x4E2D;<code>require()</code>&#x5B83;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>req.app</code>&#x6765;&#x83B7;&#x53D6;express&#x7684;&#x5B9E;&#x4F8B;&#x3002;<br>&#x4F8B;&#x5982;:</p>
<pre><code class="js">    // index.js
    app.get(&quot;/viewdirectory&quot;, require(&apos;./mymiddleware.js&apos;));</code></pre>
<pre><code class="js">// mymiddleware.js
module.exports = function(req, res) {
    res.send(&apos;The views directory is &apos; + req.app.get(&apos;views&apos;));
};</code></pre>
<h4 id="req-baseUrl"><a href="#req-baseUrl" class="headerlink" title="req.baseUrl"></a>req.baseUrl</h4><p>&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x6302;&#x8F7D;&#x7684;Url&#x8DEF;&#x5F84;&#x3002;</p>
<pre><code class="js">    var greet = express.Router();
    greet.get(&apos;/jp&apos;, function(req, res) {
        console.log(req.baseUrl); // greet
        res.send(&apos;Konichiwa!&apos;);
    });
    app.use(&apos;/greet&apos;, greet);</code></pre>
<p>&#x5373;&#x4F7F;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#x6216;&#x8005;&#x4E00;&#x7CFB;&#x5217;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#x6765;&#x52A0;&#x8F7D;&#x8DEF;&#x7531;&#xFF0C;<code>baseUrl</code>&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8DEF;&#x7531;&#x6A21;&#x5F0F;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;<code>greet</code>&#x8DEF;&#x7531;&#x88AB;&#x52A0;&#x8F7D;&#x5728;&#x4E24;&#x4E2A;&#x8DEF;&#x5F84;&#x6A21;&#x5F0F;&#x4E0A;&#x3002;</p>
<pre><code class="js">app.use([&apos;/gre+t&apos;, &apos;hel{2}o&apos;], greet); // load the on router on &apos;/gre+t&apos; and &apos;/hel{2}o&apos;</code></pre>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#x662F;<code>/greet/jp</code>&#xFF0C;<code>baseUrl</code>&#x662F;<code>/greet</code>&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#x662F;<code>/hello/jp</code>&#xFF0C;<code>req.baseUrl</code>&#x662F;<code>/hello</code>&#x3002;<br><code>req.baseUrl</code>&#x548C;<code>app</code>&#x5BF9;&#x8C61;&#x7684;<a href="http://expressjs.com/4x/api.html#app.mountpath" target="_blank" rel="noopener">mountpath</a>&#x5C5E;&#x6027;&#x76F8;&#x4F3C;&#xFF0C;&#x9664;&#x4E86;<code>app.mountpath</code>&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x8DEF;&#x5F84;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#x3002;</p>
<h4 id="req-body"><a href="#req-body" class="headerlink" title="req.body"></a>req.body</h4><p>&#x5728;&#x8BF7;&#x6C42;&#x7684;body&#x4E2D;&#x4FDD;&#x5B58;&#x7684;&#x662F;&#x63D0;&#x4EA4;&#x7684;&#x4E00;&#x5BF9;&#x5BF9;&#x952E;&#x503C;&#x6570;&#x636E;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5B83;&#x662F;<code>undefined</code>&#xFF0C;&#x5F53;&#x4F60;&#x4F7F;&#x7528;&#x6BD4;&#x5982;<code>body-parser</code>&#x548C;<code>multer</code>&#x8FD9;&#x7C7B;&#x89E3;&#x6790;<code>body</code>&#x6570;&#x636E;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x65F6;&#xFF0C;&#x5B83;&#x662F;&#x586B;&#x5145;&#x7684;&#x3002;<br>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x7ED9;&#x4F60;&#x5C55;&#x793A;&#x4E86;&#x600E;&#x4E48;&#x4F7F;&#x7528;<code>body-parser</code>&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x586B;&#x5145;<code>req.body</code>&#x3002;</p>
<pre><code class="js">    var app = require(&apos;express&apos;);
    var bodyParser = require(&apos;body-parser&apos;);
    var multer = require(&apos;multer&apos;)&#xFF1B;// v1.0.5
    var upload = multer(); // for parsing multipart/form-data
    app.use(bodyParser.json()); // for parsing application/json
    app.use(bodyParser.urlencoded({extended:true})); // for parsing application/x-www-form-urlencoded

    app.post(&apos;/profile&apos;, upload.array(), function(req, res, next) {
        console.log(req.body);
        res.json(req.body);
    });</code></pre>
<h4 id="req-cookies"><a href="#req-cookies" class="headerlink" title="req.cookies"></a>req.cookies</h4><p>&#x5F53;&#x4F7F;&#x7528;<code>cookie-parser</code>&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5305;&#x542B;&#x4E86;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;<code>cookies</code>&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x5E26;<code>cookies</code>&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x503C;&#x4E3A;<code>{}</code>&#x3002;</p>
<pre><code class="js">    // Cookie: name=tj
    req.cookies.name
    // =&gt; &quot;tj&quot;</code></pre>
<p>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x95EE;&#x9898;&#xFF0C;&#x6216;&#x8005;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="https://github.com/expressjs/cookie-parser?_ga=1.268562033.1201680737.1446005628" target="_blank" rel="noopener">cookie-parser</a>&#x3002;</p>
<h4 id="req-fresh"><a href="#req-fresh" class="headerlink" title="req.fresh"></a>req.fresh</h4><p>&#x6307;&#x793A;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x662F;&#x65B0;&#x9C9C;&#x7684;&#x3002;&#x5176;&#x548C;<code>req.stale</code>&#x662F;&#x76F8;&#x53CD;&#x7684;&#x3002;<br>&#x5F53;<code>cache-control</code>&#x8BF7;&#x6C42;&#x5934;&#x6CA1;&#x6709;<code>no-cache</code>&#x6307;&#x793A;&#x548C;&#x4E0B;&#x9762;&#x4E2D;&#x7684;&#x4EFB;&#x4E00;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x4E3A;<code>true</code>&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x5C31;&#x4E3A;<code>true</code>&#xFF1A;</p>
<ul>
<li><code>if-modified-since</code>&#x8BF7;&#x6C42;&#x5934;&#x88AB;&#x6307;&#x5B9A;&#xFF0C;&#x548C;<code>last-modified</code>&#x8BF7;&#x6C42;&#x5934;&#x7B49;&#x4E8E;&#x6216;&#x8005;&#x65E9;&#x4E8E;<code>modified</code>&#x54CD;&#x5E94;&#x5934;&#x3002;</li>
<li><code>if-none-match</code>&#x8BF7;&#x6C42;&#x5934;&#x662F;<code>*</code>&#x3002;</li>
<li><code>if-none-match</code>&#x8BF7;&#x6C42;&#x5934;&#x5728;&#x88AB;&#x89E3;&#x6790;&#x8FDB;&#x5B83;&#x7684;&#x6307;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x4E0D;&#x5339;&#x914D;<code>etag</code>&#x54CD;&#x5E94;&#x5934;(&#x5B8C;&#x5168;&#x4E0D;&#x77E5;&#x9053;&#x4EC0;&#x4E48;&#x9B3C;)&#x3002;</li>
</ul>
<pre><code class="js">    req.fresh
    // =&gt; true</code></pre>
<h4 id="req-hostname"><a href="#req-hostname" class="headerlink" title="req.hostname"></a>req.hostname</h4><p>&#x5305;&#x542B;&#x4E86;&#x6E90;&#x81EA;<code>Host</code>HTTP&#x5934;&#x90E8;&#x7684;<code>hostname</code>&#x3002;<br>&#x5F53;<code>trust proxy</code>&#x8BBE;&#x7F6E;&#x9879;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x542F;&#x7528;&#x503C;&#xFF0C;<code>X-Forwarded-Host</code>&#x5934;&#x90E8;&#x88AB;&#x4F7F;&#x7528;&#x6765;&#x4EE3;&#x66FF;<code>Host</code>&#x3002;&#x8FD9;&#x4E2A;&#x5934;&#x90E8;&#x53EF;&#x4EE5;&#x88AB;&#x5BA2;&#x6237;&#x7AEF;&#x6216;&#x8005;&#x4EE3;&#x7406;&#x8BBE;&#x7F6E;&#x3002;</p>
<pre><code class="js">// Host: &quot;example.com&quot;
req.hostname
// =&gt; &quot;example.com&quot;</code></pre>
<h4 id="req-ips"><a href="#req-ips" class="headerlink" title="req.ips"></a>req.ips</h4><p>&#x5F53;<code>trust proxy</code>&#x8BBE;&#x7F6E;&#x9879;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x542F;&#x7528;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x7EC4;&#x5728;<code>X-Forwarded-For</code>&#x8BF7;&#x6C42;&#x5934;&#x4E2D;&#x6307;&#x5B9A;&#x7684;IP&#x5730;&#x5740;&#x3002;&#x4E0D;&#x7136;&#xFF0C;&#x5176;&#x5C31;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x6570;&#x7EC4;&#x3002;&#x8FD9;&#x4E2A;&#x5934;&#x90E8;&#x53EF;&#x4EE5;&#x88AB;&#x5BA2;&#x6237;&#x7AEF;&#x6216;&#x8005;&#x4EE3;&#x7406;&#x8BBE;&#x7F6E;&#x3002;<br>&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;<code>X-Forwarded-For</code>&#x662F;<code>client</code>&#xFF0C;<code>proxy1</code>&#xFF0C;<code>proxy2</code>&#xFF0C;<code>req.ips</code>&#x5C31;&#x662F;<code>[&quot;clinet&quot;, &quot;proxy1&quot;, &quot;proxy2&quot;]</code>&#xFF0C;&#x8FD9;&#x91CC;<code>proxy2</code>&#x5C31;&#x662F;&#x6700;&#x8FDC;&#x7684;&#x4E0B;&#x6E38;&#x3002;</p>
<h4 id="req-originalUrl"><a href="#req-originalUrl" class="headerlink" title="req.originalUrl"></a>req.originalUrl</h4><blockquote>
<p><code>req.url</code>&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x539F;&#x751F;&#x7684;<code>Express</code>&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x81EA;<a href="https://nodejs.org/api/http.html#http_message_url" target="_blank" rel="noopener">Node&#x2019;s http module</a>&#x3002;</p>
</blockquote>
<p>&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5F88;&#x50CF;<code>req.url</code>&#xFF1B;&#x7136;&#x800C;&#xFF0C;&#x5176;&#x4FDD;&#x7559;&#x4E86;&#x539F;&#x7248;&#x7684;&#x8BF7;&#x6C42;&#x94FE;&#x63A5;&#xFF0C;&#x5141;&#x8BB8;&#x4F60;&#x81EA;&#x7531;&#x5730;&#x91CD;&#x5B9A;&#x5411;<code>req.url</code>&#x5230;&#x5185;&#x90E8;&#x8DEF;&#x7531;&#x3002;&#x6BD4;&#x5982;&#xFF0C;<code>app.use()</code>&#x7684;<code>mounting</code>&#x7279;&#x70B9;&#x53EF;&#x4EE5;&#x91CD;&#x5B9A;&#x5411;<code>req.url</code>&#x8DF3;&#x8F6C;&#x5230;&#x6302;&#x8F7D;&#x70B9;&#x3002;</p>
<pre><code class="js">// GET /search?q=something
req.originalUrl
// =&gt; &quot;/search?q=something&quot;</code></pre>
<h4 id="req-params"><a href="#req-params" class="headerlink" title="req.params"></a>req.params</h4><p>&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x548C;&#x5728;&#x8DEF;&#x7531;&#x4E2D;&#x547D;&#x540D;&#x7684;&#x53C2;&#x6570;&#x540D;&#x662F;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x7684;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6709;<code>/user/:name</code>&#x8DEF;&#x7531;&#xFF0C;<code>name</code>&#x5C5E;&#x6027;&#x53EF;&#x4F5C;&#x4E3A;<code>req.params.name</code>&#x3002;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;<code>{}</code>&#x3002;</p>
<pre><code class="js">// GET /user/tj
req.params.name
// =&gt; &quot;tj&quot;</code></pre>
<p>&#x5F53;&#x4F60;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x5B9A;&#x4E49;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#xFF0C;&#x6355;&#x83B7;&#x7EC4;&#x7684;&#x7EC4;&#x5408;&#x4E00;&#x822C;&#x4F7F;&#x7528;<code>req.params[n]</code>&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>n</code>&#x662F;&#x7B2C;&#x51E0;&#x4E2A;&#x6355;&#x83B7;&#x79DF;&#x3002;&#x8FD9;&#x4E2A;&#x89C4;&#x5219;&#x88AB;&#x65BD;&#x52A0;&#x5728;&#x65E0;&#x540D;&#x901A;&#x914D;&#x7B26;&#x5339;&#x914D;&#xFF0C;&#x6BD4;&#x5982;<code>/file/*</code>&#x7684;&#x8DEF;&#x7531;&#xFF1A;</p>
<pre><code class="js">// GET /file/javascripts/jquery.js
req.params[0]
// =&gt; &quot;javascripts/jquery.js&quot;</code></pre>
<h4 id="req-path"><a href="#req-path" class="headerlink" title="req.path"></a>req.path</h4><p>&#x5305;&#x542B;&#x8BF7;&#x6C42;URL&#x7684;&#x90E8;&#x5206;&#x8DEF;&#x5F84;&#x3002;</p>
<pre><code class="js">// example.com/users?sort=desc
req.path
// =&gt; &quot;/users&quot;</code></pre>
<blockquote>
<p>&#x5F53;&#x5728;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x4E2D;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x6302;&#x8F7D;&#x70B9;&#x4E0D;&#x5305;&#x542B;&#x5728;<code>req.path</code>&#x4E2D;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="http://expressjs.com/4x/api.html#app.use" target="_blank" rel="noopener">app.use()</a>&#x83B7;&#x5F97;&#x8DDF;&#x591A;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
</blockquote>
<h4 id="req-protocol"><a href="#req-protocol" class="headerlink" title="req.protocol"></a>req.protocol</h4><p>&#x8BF7;&#x6C42;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;<code>http</code>&#xFF0C;&#x5F53;&#x542F;&#x7528;TLS&#x52A0;&#x5BC6;&#xFF0C;&#x5219;&#x4E3A;<code>https</code>&#x3002;<br>&#x5F53;<code>trust proxy</code>&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x542F;&#x7528;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;<code>X-Forwarded-Proto</code>&#x5934;&#x90E8;&#x7684;&#x8BDD;&#xFF0C;&#x5176;&#x5C06;&#x88AB;&#x4FE1;&#x8D56;&#x548C;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x5934;&#x90E8;&#x53EF;&#x4EE5;&#x88AB;&#x5BA2;&#x6237;&#x7AEF;&#x6216;&#x8005;&#x4EE3;&#x7406;&#x8BBE;&#x7F6E;&#x3002;</p>
<pre><code class="js">req.ptotocol
// =&gt; &quot;http&quot;</code></pre>
<h4 id="req-query"><a href="#req-query" class="headerlink" title="req.query"></a>req.query</h4><p>&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x4E2D;&#x7684;<code>query string</code>&#x53C2;&#x6570;&#x90FD;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;<code>query string</code>&#xFF0C;&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x5BF9;&#x8C61;&#xFF0C;<code>{}</code>&#x3002;</p>
<pre><code class="js">// GET /search?q=tobi+ferret
req.query.q
// =&gt; &quot;tobi ferret&quot;

// GET /shoes?order=desc&amp;shoe[color]=blue&amp;shoe[type]=converse
req.query.order
// =&gt; &quot;desc&quot;

req.query.shoe.color
// =&gt; &quot;blue&quot;

req.query.shoe.type
// =&gt; &quot;converse&quot;</code></pre>
<h4 id="req-route"><a href="#req-route" class="headerlink" title="req.route"></a>req.route</h4><p>&#x5F53;&#x524D;&#x5339;&#x914D;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x5176;&#x4E3A;&#x4E00;&#x4E32;&#x5B57;&#x7B26;&#x3002;&#x6BD4;&#x5982;&#xFF1A;</p>
<pre><code class="js">app.get(&apos;/user/:id?&apos;, function userIdHandler(req, res) {
    console.log(req.route);
    res.send(&apos;GET&apos;)
})</code></pre>
<p>&#x524D;&#x9762;&#x7247;&#x6BB5;&#x7684;&#x8F93;&#x51FA;&#x4E3A;:</p>
<pre><code class="js">{ path:&quot;/user/:id?&quot;
    stack:
    [
        { handle:[Function:userIdHandler],
          name:&quot;userIdHandler&quot;,
          params:undefined,
          path:undefined,
          keys:[],
          regexp:/^\/?$/i,
          method:&apos;get&apos;
        }
    ]
    methods:{get:true}
}</code></pre>
<h4 id="req-secure"><a href="#req-secure" class="headerlink" title="req.secure"></a>req.secure</h4><p>&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x5EFA;&#x7ACB;&#x7684;&#x662F;TLS&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E3A;<code>true</code>&#x3002;&#x7B49;&#x4EF7;&#x4E0E;&#xFF1A;</p>
<pre><code class="js">    &apos;https&apos; == req.protocol;</code></pre>
<h4 id="req-signedCookies"><a href="#req-signedCookies" class="headerlink" title="req.signedCookies"></a>req.signedCookies</h4><p>&#x5F53;&#x4F7F;&#x7528;<code>cookie-parser</code>&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x5305;&#x542B;&#x7684;&#x662F;&#x8BF7;&#x6C42;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x7B7E;&#x540D;<code>cookies</code>&#xFF0C;&#x4E0D;&#x7B7E;&#x540D;&#x7684;&#x5E76;&#x4E14;&#x4E3A;&#x4F7F;&#x7528;&#x505A;&#x597D;&#x4E86;&#x51C6;&#x5907;(&#x8FD9;&#x53E5;&#x771F;&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x7FFB;&#x8BD1;&#x4E86;&#x2026;)&#x3002;&#x7B7E;&#x540D;<code>cookies</code>&#x9A7B;&#x7559;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x4E2D;&#x6765;&#x4F53;&#x73B0;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x610F;&#x56FE;&#xFF1B;&#x4E0D;&#x7136;&#xFF0C;&#x4E00;&#x4E2A;&#x6076;&#x610F;&#x653B;&#x51FB;&#x53EF;&#x4EE5;&#x88AB;&#x65BD;&#x52A0;&#x5728;<code>req.cookie</code>&#x503C;&#x4E0A;(&#x5B83;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x6B3A;&#x9A97;&#x7684;)&#x3002;&#x8BB0;&#x4F4F;&#xFF0C;&#x7B7E;&#x540D;&#x4E00;&#x4E2A;<code>cookie</code>&#x4E0D;&#x662F;&#x628A;&#x5B83;&#x85CF;&#x8D77;&#x6765;&#x6216;&#x8005;&#x52A0;&#x5BC6;&#xFF1B;&#x800C;&#x662F;&#x7B80;&#x5355;&#x7684;&#x9632;&#x6B62;&#x7BE1;&#x6539;(&#x56E0;&#x4E3A;&#x7B7E;&#x540D;&#x4F7F;&#x7528;&#x7684;&#x52A0;&#x5BC6;&#x662F;&#x79C1;&#x4EBA;&#x7684;)&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53D1;&#x9001;&#x7B7E;&#x540D;&#x7684;<code>cookie</code>&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x9ED8;&#x8BA4;&#x4E3A;<code>{}</code>&#x3002;</p>
<pre><code class="js">// Cookie&#xFF1A; user=tobi.CP7AWaXDfAKIRfH49dQzKJx7sKzzSoPq7/AcBBRVwlI3
req.signedCookies.user
// =&gt; &quot;tobi&quot;</code></pre>
<p>&#x4E3A;&#x4E86;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x95EE;&#x9898;&#x6216;&#x8005;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x9605;<a href="https://github.com/expressjs/cookie-parser?_ga=1.25372221.1201680737.1446005628" target="_blank" rel="noopener">cookie-parser</a>&#x3002;</p>
<h4 id="req-stale"><a href="#req-stale" class="headerlink" title="req.stale"></a>req.stale</h4><p>&#x6307;&#x793A;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x662F;<code>stale</code>(&#x9648;&#x65E7;&#x7684;)&#xFF0C;&#x5B83;&#x4E0E;<code>req.fresh</code>&#x662F;&#x76F8;&#x53CD;&#x7684;&#x3002;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href="http://expressjs.com/4x/api.html#req.fresh" target="_blank" rel="noopener">req.fresh</a>&#x3002;</p>
<pre><code class="js">req.stale
// =&gt; true</code></pre>
<h4 id="req-subdomains"><a href="#req-subdomains" class="headerlink" title="req.subdomains"></a>req.subdomains</h4><p>&#x8BF7;&#x6C42;&#x4E2D;&#x57DF;&#x540D;&#x7684;&#x5B50;&#x57DF;&#x540D;&#x6570;&#x7EC4;&#x3002;</p>
<pre><code class="js">// Host: &quot;tobi.ferrets.example.com&quot;
req.subdomains
// =&gt; [&quot;ferrets&quot;, &quot;tobi&quot;]</code></pre>
<h4 id="req-xhr"><a href="#req-xhr" class="headerlink" title="req.xhr"></a>req.xhr</h4><p>&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x5982;&#x679C;<code>X-Requested-With</code>&#x7684;&#x503C;&#x4E3A;<code>XMLHttpRequest</code>&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x4E3A;<code>true</code>&#xFF0C;&#x5176;&#x6307;&#x793A;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x662F;&#x88AB;&#x4E00;&#x4E2A;&#x5BA2;&#x670D;&#x7AEF;&#x5E93;&#x53D1;&#x9001;&#xFF0C;&#x6BD4;&#x5982;<code>jQuery</code>&#x3002;</p>
<pre><code class="js">req.xhr
// =&gt; true
</code></pre>
<h3 id="Methods-2"><a href="#Methods-2" class="headerlink" title="Methods"></a>Methods</h3><h4 id="req-accepts-types"><a href="#req-accepts-types" class="headerlink" title="req.accepts(types)"></a>req.accepts(types)</h4><p>&#x68C0;&#x67E5;&#x8FD9;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x5185;&#x5BB9;&#x7C7B;&#x578B;&#x662F;&#x5426;&#x88AB;&#x63A5;&#x53D7;&#xFF0C;&#x57FA;&#x4E8E;&#x8BF7;&#x6C42;&#x7684;<code>Accept</code> HTTP&#x5934;&#x90E8;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x6700;&#x4F73;&#x5339;&#x914D;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x8FD4;&#x56DE;<code>undefined</code>(&#x5728;&#x8FD9;&#x4E2A;case&#x4E0B;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5E94;&#x8BE5;&#x8FD4;&#x56DE;406&#x548C;&#x201D;Not Acceptable&#x201D;)&#x3002;<br><code>type</code>&#x503C;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x7684;<code>MIME type</code>&#x5B57;&#x7B26;&#x4E32;(&#x6BD4;&#x5982;<code>application/json</code>)&#xFF0C;&#x4E00;&#x4E2A;&#x6269;&#x5C55;&#x540D;&#x6BD4;&#x5982;<code>json</code>&#xFF0C;&#x4E00;&#x4E2A;&#x9017;&#x53F7;&#x5206;&#x9694;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x6216;&#x8005;&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x6700;&#x4F73;&#x9879;(&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;)&#x3002;</p>
<pre><code class="js">// Accept: text/html
req.accepts(&apos;html&apos;);
// =&gt; &quot;html&quot;

// Accept: text/*, application/json
req.accepts(&apos;html&apos;);
// =&gt; &quot;html&quot;

req.accepts(&apos;text/html&apos;);
// =&gt; &quot;text/html&quot;

req.accepts([&apos;json&apos;, &apos;text&apos;]);
// =&gt; &quot;json&quot;

req.accepts(&apos;application/json&apos;);
// =&gt; &quot;application/json&quot;

// Accept: text/*, application/json
req.accepts(&apos;image/png&apos;);
req.accepts(&apos;png&apos;);
// =&gt; undefined

// Accept: text/*;q=.5, application/json
req.accepts([&apos;html&apos;, &apos;json&apos;]);
// =&gt; &quot;json&quot;
</code></pre>
<p>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x4F60;&#x6709;&#x95EE;&#x9898;&#x6216;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x9605;<a href="https://github.com/expressjs/accepts?_ga=1.88139675.1201680737.1446005628" target="_blank" rel="noopener">accepts</a>&#x3002;</p>
<h4 id="req-acceptsCharsets-charset-&#x2026;"><a href="#req-acceptsCharsets-charset-&#x2026;" class="headerlink" title="req.acceptsCharsets(charset[, &#x2026;])"></a>req.acceptsCharsets(charset[, &#x2026;])</h4><p>&#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x96C6;&#x5408;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7684;&#x914D;&#x7F6E;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x57FA;&#x4E8E;&#x8BF7;&#x6C42;&#x7684;<code>Accept-Charset</code>HTTP&#x5934;&#x3002;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8FD4;&#x56DE;false&#x3002;<br>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x4F60;&#x6709;&#x95EE;&#x9898;&#x6216;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x9605;<a href="https://github.com/expressjs/accepts?_ga=1.88139675.1201680737.1446005628" target="_blank" rel="noopener">accepts</a>&#x3002;</p>
<h4 id="req-acceptsEncodings-encoding-&#x2026;"><a href="#req-acceptsEncodings-encoding-&#x2026;" class="headerlink" title="req.acceptsEncodings(encoding[, &#x2026;])"></a>req.acceptsEncodings(encoding[, &#x2026;])</h4><p>&#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x7684;&#x7F16;&#x7801;&#x96C6;&#x5408;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7684;&#x914D;&#x7F6E;&#x7684;&#x7F16;&#x7801;&#xFF0C;&#x57FA;&#x4E8E;&#x8BF7;&#x6C42;&#x7684;<code>Accept-Encoding</code>HTTP&#x5934;&#x3002;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x7684;&#x7F16;&#x7801;&#x96C6;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8FD4;&#x56DE;false&#x3002;<br>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x4F60;&#x6709;&#x95EE;&#x9898;&#x6216;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x9605;<a href="https://github.com/expressjs/accepts?_ga=1.88139675.1201680737.1446005628" target="_blank" rel="noopener">accepts</a>&#x3002;</p>
<h4 id="req-acceptsLanguages-lang-&#x2026;"><a href="#req-acceptsLanguages-lang-&#x2026;" class="headerlink" title="req.acceptsLanguages(lang [, &#x2026;])"></a>req.acceptsLanguages(lang [, &#x2026;])</h4><p>&#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x7684;&#x8BED;&#x8A00;&#x96C6;&#x5408;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7684;&#x914D;&#x7F6E;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x57FA;&#x4E8E;&#x8BF7;&#x6C42;&#x7684;<code>Accept-Language</code>HTTP&#x5934;&#x3002;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x7684;&#x8BED;&#x8A00;&#x96C6;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8FD4;&#x56DE;false&#x3002;<br>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x4F60;&#x6709;&#x95EE;&#x9898;&#x6216;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x9605;<a href="https://github.com/expressjs/accepts?_ga=1.88139675.1201680737.1446005628" target="_blank" rel="noopener">accepts</a>&#x3002;</p>
<h4 id="req-get-field"><a href="#req-get-field" class="headerlink" title="req.get(field)"></a>req.get(field)</h4><p>&#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x7684;&#x8BF7;&#x6C42;HTTP&#x5934;&#x90E8;&#x7684;&#x57DF;&#x5185;&#x5BB9;(&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;)&#x3002;<code>Referrer</code>&#x548C;<code>Referer</code>&#x7684;&#x57DF;&#x5185;&#x5BB9;&#x53EF;&#x4E92;&#x6362;&#x3002;</p>
<pre><code class="js">req.get(&apos;Content-type&apos;);
// =&gt; &quot;text/plain&quot;

req.get(&apos;content-type&apos;);
// =&gt; &quot;text/plain&quot;

req.get(&apos;Something&apos;)
// =&gt; undefined</code></pre>
<p>&#x5176;&#x662F;<code>req.header(field)</code>&#x7684;&#x522B;&#x540D;&#x3002;</p>
<h4 id="req-is-type"><a href="#req-is-type" class="headerlink" title="req.is(type)"></a>req.is(type)</h4><p>&#x5982;&#x679C;&#x8FDB;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#x7684;<code>Content-type</code>&#x5934;&#x90E8;&#x57DF;&#x5339;&#x914D;&#x53C2;&#x6570;<code>type</code>&#x7ED9;&#x5B9A;&#x7684;<code>MIME type</code>&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x8FD4;&#x56DE;<code>true</code>&#x3002;&#x5426;&#x5219;&#x8FD4;&#x56DE;<code>false</code>&#x3002;</p>
<pre><code class="js">// With Content-Type: text/html; charset=utf-8
req.is(&apos;html&apos;);
req.is(&apos;text/html&apos;);
req.is(&apos;text/*&apos;);
// =&gt; true

// When Content-Type is application/json
req.is(&apos;json&apos;);
req.is(&apos;application/json&apos;);
req.is(&apos;application/*&apos;);
// =&gt; true

req.is(&apos;html&apos;);
// =&gt; false</code></pre>
<p>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x4F60;&#x6709;&#x95EE;&#x9898;&#x6216;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x9605;<a href="https://github.com/expressjs/type-is?_ga=1.33770401.1201680737.1446005628" target="_blank" rel="noopener">type-is</a>&#x3002;</p>
<h4 id="req-param-naem-defaultValue"><a href="#req-param-naem-defaultValue" class="headerlink" title="req.param(naem, [, defaultValue])"></a>req.param(naem, [, defaultValue])</h4><blockquote>
<p>&#x8FC7;&#x65F6;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x9002;&#x5408;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;<code>req.params</code>&#xFF0C;<code>req.body</code>&#x6216;&#x8005;<code>req.query</code>&#x3002;</p>
</blockquote>
<p>&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x53C2;&#x6570;<code>name</code>&#x7684;&#x503C;&#x3002;</p>
<pre><code class="js">// ?name=tobi
req.param(&apos;name&apos;)
// =&gt; &quot;tobi&quot;

// POST name=tobi
req.param(&apos;name&apos;)
// =&gt; &quot;tobi&quot;
// /user/tobi for /user/:name
req.param(&apos;name&apos;)
// =&gt; &quot;tobi&quot;</code></pre>
<p>&#x6309;&#x4E0B;&#x9762;&#x7ED9;&#x51FA;&#x7684;&#x987A;&#x5E8F;&#x67E5;&#x627E;&#xFF1A;</p>
<ul>
<li>req.params</li>
<li>req.body</li>
<li>req.query</li>
</ul>
<p>&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;<code>defaultValue</code>&#x6765;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5728;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x5BF9;&#x8C61;&#x4E2D;&#x90FD;&#x4E0D;&#x80FD;&#x627E;&#x5230;&#x3002;</p>
<blockquote>
<p>&#x76F4;&#x63A5;&#x901A;&#x8FC7;<code>req.params</code>&#xFF0C;<code>req.body</code>&#xFF0C;<code>req.query</code>&#x53D6;&#x5F97;&#x5E94;&#x8BE5;&#x66F4;&#x52A0;&#x7684;&#x6E05;&#x6670;-&#x9664;&#x975E;&#x4F60;&#x786E;&#x5B9A;&#x6BCF;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x8F93;&#x5165;&#x3002;<br><code>Body-parser</code>&#x4E2D;&#x95F4;&#x4EF6;&#x5FC5;&#x987B;&#x52A0;&#x8F7D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;<code>req.param()</code>&#x3002;&#x8BE6;&#x7EC6;&#x8BF7;&#x770B;<a href="http://expressjs.com/4x/api.html#req.body" target="_blank" rel="noopener">req.body</a>&#x3002;</p>
</blockquote>
<h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><p><code>res</code>&#x5BF9;&#x8C61;&#x4EE3;&#x8868;&#x4E86;&#x5F53;&#x4E00;&#x4E2A;HTTP&#x8BF7;&#x6C42;&#x5230;&#x6765;&#x65F6;&#xFF0C;<code>Express</code>&#x7A0B;&#x5E8F;&#x8FD4;&#x56DE;&#x7684;HTTP&#x54CD;&#x5E94;&#x3002;&#x5728;&#x672C;&#x6587;&#x6863;&#x4E2D;&#xFF0C;&#x6309;&#x7167;&#x60EF;&#x4F8B;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x603B;&#x662F;&#x7B80;&#x79F0;&#x4E3A;<code>res</code>(http&#x8BF7;&#x6C42;&#x7B80;&#x79F0;&#x4E3A;<code>req</code>)&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x5B9E;&#x9645;&#x7684;&#x540D;&#x5B57;&#x7531;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x5728;&#x90A3;&#x91CC;&#x4F7F;&#x7528;&#x65F6;&#x7684;&#x53C2;&#x6570;&#x51B3;&#x5B9A;&#x3002;<br>&#x4F8B;&#x5982;&#xFF1A;</p>
<pre><code class="js">app.get(&apos;/user/:id&apos;, function(req, res) {
    res.send(&apos;user&apos; + req.params.id);
});</code></pre>
<p>&#x8FD9;&#x6837;&#x5199;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF1A;</p>
<pre><code class="js">app.get(&apos;/user/:id&apos;, function(request, response) {
    response.send(&apos;user&apos; + request.params.id);
});
</code></pre>
<h3 id="Properties-2"><a href="#Properties-2" class="headerlink" title="Properties"></a>Properties</h3><h4 id="res-app"><a href="#res-app" class="headerlink" title="res.app"></a>res.app</h4><p>&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x6301;&#x6709;<code>express</code>&#x7A0B;&#x5E8F;&#x5B9E;&#x4F8B;&#x7684;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#xFF0C;&#x5176;&#x53EF;&#x4EE5;&#x5728;&#x4E2D;&#x95F4;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x3002;<br><code>res.app</code>&#x548C;&#x8BF7;&#x6C42;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;<code>req.app</code>&#x5C5E;&#x6027;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</p>
<h4 id="res-headersSent"><a href="#res-headersSent" class="headerlink" title="res.headersSent"></a>res.headersSent</h4><p>&#x5E03;&#x5C14;&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x6307;&#x793A;&#x8FD9;&#x4E2A;&#x54CD;&#x5E94;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;HTTP&#x5934;&#x90E8;&#x3002;</p>
<pre><code class="js">app.get(&apos;/&apos;, function(req, res) {
    console.log(res.headersSent); // false
    res.send(&apos;OK&apos;); // send&#x4E4B;&#x540E;&#x5C31;&#x53D1;&#x9001;&#x4E86;&#x5934;&#x90E8;
    console.log(res.headersSent); // true
});</code></pre>
<h4 id="res-locals"><a href="#res-locals" class="headerlink" title="res.locals"></a>res.locals</h4><p>&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x5305;&#x542B;&#x4E86;&#x54CD;&#x5E94;&#x7684;&#x80FD;&#x591F;&#x53CD;&#x5E94;&#x51FA;&#x8BF7;&#x6C42;&#x7684;&#x672C;&#x5730;&#x53C2;&#x6570;&#x548C;&#x56E0;&#x6B64;&#x53EA;&#x63D0;&#x4F9B;&#x7ED9;&#x89C6;&#x56FE;&#x6E32;&#x67D3;&#xFF0C;&#x5728;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x7684;&#x5468;&#x671F;&#x5185;(&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;)&#x2013;&#x6211;&#x8981;&#x7FFB;&#x8BD1;&#x5410;&#x4E86;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x5176;&#x548C;<code>app.locals</code>&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;(&#x4E0D;&#x77E5;&#x9053;&#x7FFB;&#x8BD1;&#x7684;&#x4EC0;&#x4E48;&#x2026;)<br>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5728;&#x5BFC;&#x51FA;&#x8BF7;&#x6C42;&#x7EA7;&#x522B;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x5F88;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x6BD4;&#x5982;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#xFF0C;&#x5DF2;&#x8BA4;&#x8BC1;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x7B49;&#x7B49;&#x3002;</p>
<pre><code class="js">app.use(function(req, res, next) {
    res.locals.user = req.user;
    res.locals.authenticated = !req.user.anonymous;
    next();
});</code></pre>
<h3 id="Methods-3"><a href="#Methods-3" class="headerlink" title="Methods"></a>Methods</h3><h4 id="res-append-field-value"><a href="#res-append-field-value" class="headerlink" title="res.append(field [, value])"></a>res.append(field [, value])</h4><blockquote>
<p>res.append()&#x65B9;&#x6CD5;&#x5728;<code>Expresxs</code>4.11.0&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#x624D;&#x652F;&#x6301;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x6307;&#x5B9A;&#x7684;<code>field</code>&#x7684;HTTP&#x5934;&#x90E8;&#x8FFD;&#x52A0;&#x7279;&#x6B8A;&#x7684;&#x503C;<code>value</code>&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x5934;&#x90E8;&#x6CA1;&#x6709;&#x88AB;&#x8BBE;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x7528;<code>value</code>&#x65B0;&#x5EFA;&#x8FD9;&#x4E2A;&#x5934;&#x90E8;&#x3002;<code>value</code>&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x8005;&#x6570;&#x7EC4;&#x3002;<br>&#x6CE8;&#x610F;&#xFF1A;&#x5728;<code>res.append()</code>&#x4E4B;&#x540E;&#x8C03;&#x7528;<code>app.set()</code>&#x51FD;&#x6570;&#x5C06;&#x91CD;&#x7F6E;&#x524D;&#x9762;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x3002;</p>
<pre><code class="js">res.append(&apos;Lind&apos;, [&apos;&lt;http://localhost&gt;&apos;, &apos;&lt;http://localhost:3000&gt;&apos;]);
res.append(&apos;Set-Cookie&apos;, &apos;foo=bar;Path=/;HttpOnly&apos;);
res.append(&apos;Warning&apos;, &apos;199 Miscellaneous warning&apos;);</code></pre>
<h4 id="res-attachment-filename"><a href="#res-attachment-filename" class="headerlink" title="res.attachment([filename])"></a>res.attachment([filename])</h4><p>&#x8BBE;&#x7F6E;HTTP&#x54CD;&#x5E94;&#x7684;<code>Content-Disposition</code>&#x5934;&#x5185;&#x5BB9;&#x4E3A;&#x201D;attachment&#x201D;&#x3002;&#x5982;&#x679C;&#x63D0;&#x4F9B;&#x4E86;<code>filename</code>&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x901A;&#x8FC7;<code>res.type()</code>&#x83B7;&#x5F97;&#x6269;&#x5C55;&#x540D;&#x6765;&#x8BBE;&#x7F6E;<code>Content-Type</code>&#xFF0C;&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;<code>Content-Disposition</code>&#x5185;&#x5BB9;&#x4E3A;&#x201D;filename=&#x201D;parameter&#x3002;</p>
<pre><code class="js">res.attachment();
// Content-Disposition: attachment

res.attachment(&apos;path/to/logo.png&apos;);
// Content-Disposition: attachment; filename=&quot;logo.png&quot;
// Content-Type: image/png</code></pre>
<h4 id="res-cookie-name-value-options"><a href="#res-cookie-name-value-options" class="headerlink" title="res.cookie(name, value [,options])"></a>res.cookie(name, value [,options])</h4><p>&#x8BBE;&#x7F6E;<code>name</code>&#x548C;<code>value</code>&#x7684;<code>cookie</code>&#xFF0C;<code>value</code>&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E32;&#x5B57;&#x7B26;&#x6216;&#x8005;&#x662F;&#x8F6C;&#x5316;&#x4E3A;json&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5BF9;&#x8C61;&#x3002;<br>options&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x53EF;&#x4EE5;&#x6709;&#x4E0B;&#x5217;&#x7684;&#x5C5E;&#x6027;&#x3002;<br>|&#x5C5E;&#x6027;|&#x7C7B;&#x578B;|&#x63CF;&#x8FF0;|<br>|:&#x2014;:|:&#x2014;:|:&#x2014;:|<br>|domain|String|&#x8BBE;&#x7F6E;cookie&#x7684;&#x57DF;&#x540D;&#x3002;&#x9ED8;&#x8BA4;&#x662F;&#x4F60;&#x672C;app&#x7684;&#x57DF;&#x540D;&#x3002;|<br>|expires|Date|cookie&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;GMT&#x683C;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x6216;&#x8005;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x5219;&#x4EA7;&#x751F;&#x65B0;&#x7684;cookie&#x3002;|<br>|httpOnly|Boolean|&#x8FD9;&#x4E2A;cookie&#x53EA;&#x80FD;&#x88AB;web&#x670D;&#x52A1;&#x5668;&#x83B7;&#x53D6;&#x7684;&#x6807;&#x793A;&#x3002;|<br>|maxAge|String|&#x662F;&#x8BBE;&#x7F6E;&#x8FC7;&#x53BB;&#x65F6;&#x95F4;&#x7684;&#x65B9;&#x4FBF;&#x9009;&#x9879;&#xFF0C;&#x5176;&#x4E3A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x5230;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x7684;&#x6BEB;&#x79D2;&#x503C;&#x3002;|<br>|path|String|cookie&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x662F;<code>/</code>&#x3002;|<br>|secure|Boolean|&#x6807;&#x793A;&#x8FD9;&#x4E2A;cookie&#x53EA;&#x7528;&#x88AB;<code>HTTPS</code>&#x534F;&#x8BAE;&#x4F7F;&#x7528;&#x3002;|<br>|signed|Boolean|&#x6307;&#x793A;&#x8FD9;&#x4E2A;cookie&#x5E94;&#x8BE5;&#x662F;&#x7B7E;&#x540D;&#x7684;&#x3002;|</p>
<blockquote>
<p>res.cookie()&#x6240;&#x4F5C;&#x7684;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x63D0;&#x4F9B;&#x7684;<code>options</code>&#x53C2;&#x6570;&#x6765;&#x8BBE;&#x7F6E;<code>Set-Cookie</code>&#x5934;&#x90E8;&#x3002;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x7684;<code>options</code>&#xFF0C;&#x90A3;&#x4E48;&#x9ED8;&#x8BA4;&#x503C;&#x5728;<code>RFC6265</code>&#x4E2D;&#x6307;&#x5B9A;&#x3002;</p>
</blockquote>
<p>&#x4F7F;&#x7528;&#x5B9E;&#x4F8B;&#xFF1A;</p>
<pre><code class="js">res.cookie(&apos;name&apos;, &apos;tobi&apos;, {&apos;domain&apos;:&apos;.example.com&apos;, &apos;path&apos;:&apos;/admin&apos;, &apos;secure&apos;:true});
res.cookie(&apos;remenberme&apos;, &apos;1&apos;, {&apos;expires&apos;:new Date(Date.now() + 90000), &apos;httpOnly&apos;:true});</code></pre>
<p><code>maxAge</code>&#x662F;&#x4E00;&#x4E2A;&#x65B9;&#x4FBF;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x65B9;&#x4FBF;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x5176;&#x4EE5;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x5F00;&#x59CB;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#x6765;&#x8BA1;&#x7B97;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x548C;&#x4E0A;&#x9762;&#x7684;&#x7B2C;&#x4E8C;&#x6761;&#x529F;&#x6548;&#x4E00;&#x6837;&#x3002;</p>
<pre><code class="js">res.cookie(&apos;rememberme&apos;, &apos;1&apos;, {&apos;maxAge&apos;:90000}, &quot;httpOnly&quot;:true);</code></pre>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;<code>value</code>&#x7684;&#x53C2;&#x6570;&#x3002;&#x7136;&#x540E;&#x5176;&#x5C06;&#x88AB;&#x5E8F;&#x5217;&#x5316;&#x4E3A;Json&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x88AB;<code>bodyParser()</code>&#x4E2D;&#x95F4;&#x4EF6;&#x89E3;&#x6790;&#x3002;</p>
<pre><code class="js">res.cookie(&apos;cart&apos;, {&apos;items&apos;:[1, 2, 3]});
res.cookie(&apos;cart&apos;, {&apos;items&apos;:[1, 2, 3]}, {&apos;maxAge&apos;:90000});</code></pre>
<p>&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>cookie-parser</code>&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x652F;&#x6301;&#x7B7E;&#x540D;&#x7684;cookie&#x3002;&#x7B80;&#x5355;&#x5730;&#xFF0C;&#x5728;&#x8BBE;&#x7F6E;<code>options</code>&#x65F6;&#x5305;&#x542B;<code>signed</code>&#x9009;&#x9879;&#x4E3A;<code>true</code>&#x3002;&#x7136;&#x540E;<code>res.cookie()</code>&#x5C06;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x7ED9;<code>cookieParser(secret)</code>&#x7684;&#x5BC6;&#x94A5;&#x6765;&#x7B7E;&#x540D;&#x8FD9;&#x4E2A;&#x503C;&#x3002;</p>
<pre><code class="js">res.cookie(&apos;name&apos;, &apos;tobi&apos;, {&apos;signed&apos;:true});</code></pre>
<h4 id="res-clearCookie-name-options"><a href="#res-clearCookie-name-options" class="headerlink" title="res.clearCookie(name [,options])"></a>res.clearCookie(name [,options])</h4><p>&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;<code>name</code>&#x6E05;&#x9664;&#x5BF9;&#x5E94;&#x7684;cookie&#x3002;&#x66F4;&#x591A;&#x5173;&#x4E8E;<code>options</code>&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<code>res.cookie()</code>&#x3002;</p>
<pre><code class="js">res.cookie(&apos;name&apos;, &apos;tobi&apos;, {&apos;path&apos;:&apos;/admin&apos;});
res.clearCookie(&apos;name&apos;, {&apos;path&apos;:&apos;admin&apos;});</code></pre>
<h4 id="res-download-path-filename-fn"><a href="#res-download-path-filename-fn" class="headerlink" title="res.download(path, [,filename], [,fn])"></a>res.download(path, [,filename], [,fn])</h4><p>&#x4F20;&#x8F93;<code>path</code>&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9644;&#x4EF6;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x63D0;&#x793A;&#x7528;&#x6237;&#x4E0B;&#x8F7D;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>Content-Disposition</code>&#x5934;&#x90E8;&#x201D;filename=&#x201D;&#x7684;&#x53C2;&#x6570;&#x4E3A;<code>path</code>(&#x901A;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5BF9;&#x8BDD;&#x6846;&#x4E2D;)&#x3002;&#x901A;&#x8FC7;&#x6307;&#x5B9A;<code>filename</code>&#x53C2;&#x6570;&#x6765;&#x8986;&#x76D6;&#x9ED8;&#x8BA4;&#x503C;&#x3002;<br>&#x5F53;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x65F6;&#x6216;&#x8005;&#x4F20;&#x8F93;&#x5B8C;&#x6210;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C06;&#x8C03;&#x7528;<code>fn</code>&#x6307;&#x5B9A;&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;<code>res.sendFile()</code>&#x6765;&#x4F20;&#x8F93;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="js">res.download(&apos;/report-12345.pdf&apos;);

res.download(&apos;/report-12345.pdf&apos;, &apos;report.pdf&apos;);

res.download(&apos;report-12345.pdf&apos;, &apos;report.pdf&apos;, function(err) {
// Handle error, but keep in mind the response may be partially-sent
// so check res.headersSent
if (err) {
} else {
// decrement a download credit, etc.
}
});</code></pre>
<h4 id="res-end-data-encoding"><a href="#res-end-data-encoding" class="headerlink" title="res.end([data] [, encoding])"></a>res.end([data] [, encoding])</h4><p>&#x7ED3;&#x675F;&#x672C;&#x54CD;&#x5E94;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5B9E;&#x9645;&#x4E0A;&#x6765;&#x81EA;<code>Node</code>&#x6838;&#x5FC3;&#x6A21;&#x5757;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x662F;<a href="https://nodejs.org/api/http.html#http_response_end_data_encoding_callback" target="_blank" rel="noopener">response.end() method of http.ServerResponse</a>&#x3002;<br>&#x7528;&#x6765;&#x5FEB;&#x901F;&#x7ED3;&#x675F;&#x8BF7;&#x6C42;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7684;&#x6570;&#x636E;&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x53D1;&#x9001;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="http://expressjs.com/4x/api.html#res.send" target="_blank" rel="noopener">res.send()</a>&#x548C;<a href="http://expressjs.com/4x/api.html#res.json" target="_blank" rel="noopener">res.json()</a>&#x8FD9;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="js">res.end();
res.status(404).end();</code></pre>
<h4 id="res-format-object"><a href="#res-format-object" class="headerlink" title="res.format(object)"></a>res.format(object)</h4><p>&#x8FDB;&#x884C;&#x5185;&#x5BB9;&#x534F;&#x5546;&#xFF0C;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x7684;&#x5BF9;&#x8C61;&#x4E2D;<code>Accept</code>HTTP&#x5934;&#x90E8;&#x6307;&#x5B9A;&#x7684;&#x63A5;&#x53D7;&#x5185;&#x5BB9;&#x3002;&#x5B83;&#x4F7F;&#x7528;<a href="http://expressjs.com/4x/api.html#req.accepts" target="_blank" rel="noopener">req.accepts()</a>&#x6765;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x53E5;&#x67C4;&#x6765;&#x4E3A;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x4E9B;&#x53E5;&#x67C4;&#x6309;&#x8D28;&#x91CF;&#x503C;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x5934;&#x90E8;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#xFF0C;&#x90A3;&#x4E48;&#x7B2C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x5F53;&#x4E0D;&#x5339;&#x914D;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x8FD4;&#x56DE;<code>406</code>&#x201C;Not Acceptable&#x201D;&#xFF0C;&#x6216;&#x8005;&#x8C03;&#x7528;<code>default</code>&#x56DE;&#x8C03;&#x3002;<br><code>Content-Type</code>&#x8BF7;&#x6C42;&#x5934;&#x88AB;&#x8BBE;&#x7F6E;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x88AB;&#x9009;&#x62E9;&#x3002;&#x7136;&#x800C;&#x4F60;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x4ED6;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;<code>res.set()</code>&#x6216;&#x8005;<code>res.type()</code>&#x3002;<br>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5C06;&#x56DE;&#x590D;<code>{&quot;message&quot;:&quot;hey&quot;}</code>&#xFF0C;&#x5F53;&#x8BF7;&#x6C42;&#x7684;&#x5BF9;&#x8C61;&#x4E2D;<code>Accept</code>&#x5934;&#x90E8;&#x8BBE;&#x7F6E;&#x6210;&#x201D;application/json&#x201D;&#x6216;&#x8005;&#x201D;<em>/json&#x201D;(&#x4E0D;&#x8FC7;&#x5982;&#x679C;&#x662F;`</em>/*`&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E2A;&#x56DE;&#x590D;&#x5C31;&#x662F;&#x201D;hey&#x201D;)&#x3002;</p>
<pre><code class="js">res.format({
    &apos;text/plain&apos;:function() {
        res.send(&apos;hey&apos;)&apos;
    },
    &apos;text/html&apos;:function() {
        res.send(&apos;&lt;p&gt;hey&lt;/p&gt;&apos;);
    },
    &apos;application/json&apos;:function() {
        res.send({message:&apos;hey&apos;});
    },
    &apos;default&apos;:function() {
        res.status(406).send(&apos;Not Acceptable&apos;);
    }
})</code></pre>
<p>&#x9664;&#x4E86;&#x89C4;&#x8303;&#x5316;&#x7684;MIME&#x7C7B;&#x578B;&#x4E4B;&#x5916;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x62D3;&#x5C55;&#x540D;&#x6765;&#x6620;&#x5C04;&#x8FD9;&#x4E9B;&#x7C7B;&#x578B;&#x6765;&#x907F;&#x514D;&#x5197;&#x957F;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code class="js">res.format({
    text:function() {
        res.send(&apos;hey&apos;);
    },
    html:function() {
        res.send(&apos;&lt;p&gt;hey&lt;/p&gt;&apos;);
    },
    json:function() {
        res.send({message:&apos;hey&apos;});
    }
})</code></pre>
<p>####res.get(field)<br>&#x8FD4;&#x56DE;<code>field</code>&#x6307;&#x5B9A;&#x7684;HTTP&#x54CD;&#x5E94;&#x7684;&#x5934;&#x90E8;&#x3002;&#x5339;&#x914D;&#x662F;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x3002;</p>
<pre><code class="js">res.get(&apos;Content-Type&apos;);
// =&gt; &quot;text/plain&quot;</code></pre>
<p>####res.json([body])<br>&#x53D1;&#x9001;&#x4E00;&#x4E2A;json&#x7684;&#x54CD;&#x5E94;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x548C;&#x5C06;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;<code>res.send()</code>&#x65B9;&#x6CD5;&#x7684;&#x6548;&#x679C;&#x76F8;&#x540C;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x8F6C;&#x6362;&#x5176;&#x4ED6;&#x7684;&#x503C;&#x5230;json&#xFF0C;&#x4F8B;&#x5982;<code>null</code>&#xFF0C;<code>undefined</code>&#x3002;(&#x867D;&#x7136;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x6280;&#x672F;&#x4E0A;&#x65E0;&#x6548;&#x7684;JSON)&#x3002;</p>
<pre><code class="js">res.json(null);
res.json({user:&apos;tobi&apos;});
res.status(500).json({error:&apos;message&apos;});
</code></pre>
<p>####res.jsonp([body])<br>&#x53D1;&#x9001;&#x4E00;&#x4E2A;json&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x5E76;&#x4E14;&#x652F;&#x6301;JSONP&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x548C;<code>res.json()</code>&#x6548;&#x679C;&#x76F8;&#x540C;&#xFF0C;&#x9664;&#x4E86;&#x5176;&#x5728;&#x9009;&#x9879;&#x4E2D;&#x652F;&#x6301;JSONP&#x56DE;&#x8C03;&#x3002;</p>
<pre><code class="js">res.jsonp(null)
// =&gt; null

res.jsonp({user:&apos;tobi&apos;})
// =&gt; {&quot;user&quot; : &quot;tobi&quot;}

res.status(500).jsonp({error:&apos;message&apos;})
 // =&gt; {&quot;error&quot; : &quot;message&quot;}</code></pre>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;jsonp&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x7B80;&#x5355;&#x5199;&#x4F5C;<code>callback</code>&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href="http://expressjs.com/4x/api.html#app.settings.table" target="_blank" rel="noopener">jsonp callback name</a>&#x8BBE;&#x7F6E;&#x6765;&#x91CD;&#x5199;&#x5B83;&#x3002;<br>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;&#x4F7F;&#x7528;JSONP&#x54CD;&#x5E94;&#xFF0C;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x4EE3;&#x7801;:</p>
<pre><code class="js">// ?callback=foo
res.jsonp({user:&apos;tobo&apos;})
// =&gt; foo({&quot;user&quot;:&quot;tobi&quot;})

app.set(&apos;jsonp callback name&apos;, &apos;cb&apos;)

// ?cb=foo
res.status(500).jsonp({error:&apos;message&apos;})
// =&gt; foo({&quot;error&quot;:&quot;message&quot;})</code></pre>
<p>####res.links(links)<br>&#x8FDE;&#x63A5;&#x8FD9;&#x4E9B;<code>links</code>&#xFF0C;<code>links</code>&#x662F;&#x4EE5;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x7684;&#x5C5E;&#x6027;&#x5F62;&#x5F0F;&#x63D0;&#x4F9B;&#xFF0C;&#x8FDE;&#x63A5;&#x4E4B;&#x540E;&#x7684;&#x5185;&#x5BB9;&#x7528;&#x6765;&#x586B;&#x5145;&#x54CD;&#x5E94;&#x7684;Link HTTP&#x5934;&#x90E8;&#x3002;</p>
<pre><code class="js">res.links({
    next:&apos;http://api.example.com/users?page=2&apos;,
    last:&apos;http://api.example.com/user?page=5&apos;
});</code></pre>
<p>&#x6548;&#x679C;&#xFF1A;</p>
<pre><code class="js">Link:&lt;http://api.example.com/users?page=2&gt;;rel=&quot;next&quot;,
&lt;http://api.example.com/users?page=5&gt;;rel=&quot;last&quot;</code></pre>
<p>####res.location(path)<br>&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x7684;<code>Location</code>HTTP&#x5934;&#x90E8;&#x4E3A;&#x6307;&#x5B9A;&#x7684;<code>path</code>&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="js">    res.location(&apos;/foo/bar&apos;);
    res.location(&apos;http://example.com&apos;);
    res.location(&apos;back&apos;);</code></pre>
<p>&#x5F53;<code>path</code>&#x53C2;&#x6570;&#x4E3A;<code>back</code>&#x65F6;&#xFF0C;&#x5176;&#x5177;&#x6709;&#x7279;&#x6B8A;&#x7684;&#x610F;&#x4E49;&#xFF0C;&#x5176;&#x6307;&#x5B9A;URL&#x4E3A;&#x8BF7;&#x6C42;&#x5BF9;&#x8C61;&#x7684;<code>Referer</code>&#x5934;&#x90E8;&#x6307;&#x5B9A;&#x7684;URL&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4E2D;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x5373;&#x4E3A;&#x201D;/&#x201C;&#x3002;</p>
<blockquote>
<p>Express&#x4F20;&#x9012;&#x6307;&#x5B9A;&#x7684;URL&#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A;&#x56DE;&#x590D;&#x7ED9;&#x6D4F;&#x89C8;&#x5668;&#x54CD;&#x5E94;&#x4E2D;&#x7684;<code>Location</code>&#x5934;&#x90E8;&#x7684;&#x503C;&#xFF0C;&#x4E0D;&#x68C0;&#x6D4B;&#x548C;&#x64CD;&#x4F5C;&#xFF0C;&#x9664;&#x4E86;&#x5F53;&#x662F;<code>back</code>&#x8FD9;&#x4E2A;case&#x65F6;&#x3002;&#x6D4F;&#x89C8;&#x5668;&#x6709;&#x63A8;&#x5BFC;&#x9884;&#x671F;URL&#x4ECE;&#x5F53;&#x524D;&#x7684;URL&#x6216;&#x8005;&#x6307;&#x5B9A;&#x7684;URL&#xFF0C;&#x548C;&#x5728;<code>Location</code>&#x6307;&#x5B9A;&#x7684;URL&#x7684;&#x8D23;&#x4EFB;&#xFF1B;&#x76F8;&#x5E94;&#x5730;&#x91CD;&#x5B9A;&#x5411;&#x5B83;&#x3002;(&#x6211;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x7FFB;&#x8BD1;&#x7684;&#x4EC0;&#x4E48;&#x2026;)</p>
</blockquote>
<p>####res.redirect([status,] path)<br>&#x91CD;&#x5B9A;&#x5411;&#x6765;&#x6E90;&#x4E8E;&#x6307;&#x5B9A;<code>path</code>&#x7684;URL&#xFF0C;&#x4EE5;&#x53CA;&#x6307;&#x5B9A;&#x7684;<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" target="_blank" rel="noopener">HTTP status code</a><code>status</code>&#x3002;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x6307;&#x5B9A;<code>status</code>&#xFF0C;status code&#x9ED8;&#x8BA4;&#x4E3A;&#x201D;302 Found&#x201D;&#x3002;</p>
<pre><code class="js">res.redirect(&apos;/foo/bar&apos;);
res.redirect(&apos;http://example.com&apos;);
res.redirect(301, &apos;http://example.com&apos;);
res.redirect(&apos;../login&apos;);</code></pre>
<p>&#x91CD;&#x5B9A;&#x5411;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5B8C;&#x6574;&#x7684;URL&#xFF0C;&#x6765;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7AD9;&#x70B9;&#x3002;</p>
<pre><code class="js">res.redirect(&apos;http://google.com&apos;);</code></pre>
<p>&#x91CD;&#x5B9A;&#x5411;&#x4E5F;&#x53EF;&#x4EE5;&#x76F8;&#x5BF9;&#x4E8E;&#x4E3B;&#x673A;&#x7684;&#x6839;&#x8DEF;&#x5F84;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x7684;&#x8DEF;&#x5F84;&#x4E3A;<code>http://example.com/admin/post/new</code>&#xFF0C;&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x5C06;&#x91CD;&#x5B9A;&#x5411;&#x5230;<code>http://example.com/admim</code>:</p>
<pre><code class="js">res.redirect(&apos;/admin&apos;);</code></pre>
<p>&#x91CD;&#x5B9A;&#x5411;&#x4E5F;&#x53EF;&#x4EE5;&#x76F8;&#x5BF9;&#x4E8E;&#x5F53;&#x524D;&#x7684;URL&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x6765;&#x4E4B;&#x4E8E;<code>http://example.com/blog/admin/</code>(&#x6CE8;&#x610F;&#x7ED3;&#x5C3E;&#x7684;<code>/</code>)&#xFF0C;&#x4E0B;&#x9762;&#x5C06;&#x91CD;&#x5B9A;&#x5411;&#x5230;<code>http://example.com/blog/admin/post/new</code>&#x3002;</p>
<pre><code class="js">res.redirect(&apos;post/new&apos;);</code></pre>
<p>&#x5982;&#x679C;&#x6765;&#x81F3;&#x4E8E;<code>http://example.com/blog/admin</code>&#xFF08;&#x6CA1;&#x6709;&#x5C3E;&#x90E8;<code>/</code>&#xFF09;&#xFF0C;&#x91CD;&#x5B9A;&#x5411;<code>post/new</code>&#xFF0C;&#x5C06;&#x91CD;&#x5B9A;&#x5411;&#x5230;<code>http://example.com/blog/post/new</code>&#x3002;&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x4E0A;&#x9762;&#x5F88;&#x6DF7;&#x4E71;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x8DEF;&#x5F84;&#x6BB5;&#x8BA4;&#x4E3A;&#x76EE;&#x5F55;(&#x6709;&#x2019;/&#x2018;)&#x6216;&#x8005;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x6837;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5F53;&#x524D;&#x7684;&#x8DEF;&#x5F84;&#x4E3A;<code>http://example.com/admin/post/new</code>&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x5C06;&#x91CD;&#x5B9A;&#x5411;&#x5230;<code>http://example.com/admin/post</code>&#xFF1A;</p>
<pre><code class="js">res.redirect(&apos;..&apos;);</code></pre>
<p><code>back</code>&#x5C06;&#x91CD;&#x5B9A;&#x5411;&#x8BF7;&#x6C42;&#x5230;<a href="http://en.wikipedia.org/wiki/HTTP_referer" target="_blank" rel="noopener">referer</a>&#xFF0C;&#x5F53;&#x6CA1;&#x6709;<code>referer</code>&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;<code>/</code>&#x3002;</p>
<pre><code class="js">res.redirect(&apos;back&apos;);</code></pre>
<p>####res.render(view [, locals] [, callback])<br>&#x6E32;&#x67D3;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6E32;&#x67D3;&#x5F97;&#x5230;&#x7684;HTML&#x6587;&#x6863;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x53EF;&#x9009;&#x7684;&#x53C2;&#x6570;&#x4E3A;:</p>
<ul>
<li><code>locals</code>&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x89C6;&#x56FE;&#x672C;&#x5730;&#x53C2;&#x6570;&#x5C5E;&#x6027;&#x7684;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;</li>
<li><code>callback</code>&#xFF0C;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x63D0;&#x4F9B;&#x4E86;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;<code>render</code>&#x65B9;&#x6CD5;&#x5C06;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x548C;&#x6E32;&#x67D3;&#x4E4B;&#x540E;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x81EA;&#x52A8;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x3002;&#x5F53;&#x6709;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x5185;&#x90E8;&#xFF0C;&#x8C03;&#x7528;<code>next(err)</code>&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<blockquote>
<p>&#x672C;&#x5730;&#x53D8;&#x91CF;&#x7F13;&#x5B58;&#x4F7F;&#x80FD;&#x89C6;&#x56FE;&#x7F13;&#x5B58;&#x3002;&#x5728;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4E2D;&#x7F13;&#x5B58;&#x89C6;&#x56FE;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;&#x4E3A;true&#xFF1B;&#x89C6;&#x56FE;&#x7F13;&#x5B58;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x3002;</p>
</blockquote>
<pre><code class="js">
// send the rendered view to the client
res.render(&apos;index&apos;);

// if a callback is specified, the render HTML string has to be sent explicitly

res.render(&apos;index&apos;, function(err, html) {
    res.send(html);
});

// pass a local variable to  the view
res.render(&apos;user&apos;, {name:&apos;Tobi&apos;}, function(err, html) {
    // ...
});</code></pre>
<p>####res.send([body])<br>&#x53D1;&#x9001;HTTP&#x54CD;&#x5E94;&#x3002;<br><code>body</code>&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;<code>Buffer</code>&#x5BF9;&#x8C61;&#xFF0C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x6BD4;&#x5982;&#xFF1A;</p>
<pre><code class="js">res.send(new Buffer(&apos;whoop&apos;));
res.send({some:&apos;json&apos;});
res.send(&apos;&lt;p&gt;some html&lt;/p&gt;&apos;);
res.status(404).send(&apos;Sorry, we cannot find that!&apos;);
res.status(500).send({ error: &apos;something blew up&apos; });
</code></pre>
<p>&#x5BF9;&#x4E8E;&#x4E00;&#x822C;&#x7684;&#x975E;&#x6D41;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x8BB8;&#x591A;&#x6709;&#x7528;&#x7684;&#x7684;&#x4EFB;&#x52A1;&#xFF1A;&#x6BD4;&#x5982;&#xFF0C;&#x5B83;&#x81EA;&#x52A8;&#x7ED9;<code>Content-Length</code>HTTP&#x54CD;&#x5E94;&#x5934;&#x8D4B;&#x503C;(&#x9664;&#x975E;&#x5148;&#x524D;&#x5B9A;&#x4E49;)&#xFF0C;&#x4E5F;&#x652F;&#x6301;&#x81EA;&#x52A8;&#x7684;HEAD&#x548C;HTTP&#x7F13;&#x5B58;&#x66F4;&#x65B0;&#x3002;<br>&#x5F53;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;<code>Buffer</code>&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;<code>Content-Type</code>&#x54CD;&#x5E94;&#x5934;&#x4E3A;<code>application/octet-stream</code>&#xFF0C;&#x9664;&#x975E;&#x4E8B;&#x5148;&#x63D0;&#x4F9B;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;:</p>
<pre><code class="js">res.set(&apos;Content-Type&apos;, &apos;text/html&apos;);
res.send(new Buffer(&apos;&lt;p&gt;some html&lt;/p&gt;&apos;));</code></pre>
<p>&#x5F53;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;<code>Content-Type</code>&#x54CD;&#x5E94;&#x5934;&#x4E3A;<code>text/html</code>&#xFF1A;</p>
<pre><code class="js">res.send(&apos;&lt;p&gt;some html&lt;/p&gt;&apos;);</code></pre>
<p>&#x5F53;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x6570;&#x7EC4;&#xFF0C;Express&#x4F7F;&#x7528;JSON&#x683C;&#x5F0F;&#x6765;&#x8868;&#x793A;&#xFF1A;</p>
<pre><code class="js">res.send({user:&apos;tobi&apos;});
res.send([1, 2, 3]);</code></pre>
<p>####res.sendFile(path [, options] [, fn])</p>
<blockquote>
<p><code>res.sendFile()</code>&#x4ECE;<code>Express v4.8.0</code>&#x5F00;&#x59CB;&#x652F;&#x6301;&#x3002;</p>
</blockquote>
<p>&#x4F20;&#x8F93;<code>path</code>&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x6839;&#x636E;&#x6587;&#x4EF6;&#x7684;&#x6269;&#x5C55;&#x540D;&#x8BBE;&#x7F6E;<code>Content-Type</code>HTTP&#x5934;&#x90E8;&#x3002;&#x9664;&#x975E;&#x5728;<code>options</code>&#x4E2D;&#x6709;&#x5173;&#x4E8E;<code>root</code>&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;<code>path</code>&#x4E00;&#x5B9A;&#x662F;&#x5173;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;<br>&#x4E0B;&#x9762;&#x7684;&#x8868;&#x63D0;&#x4F9B;&#x4E86;<code>options</code>&#x53C2;&#x6570;&#x7684;&#x7EC6;&#x8282;:<br>|&#x5C5E;&#x6027;|&#x63CF;&#x8FF0;|&#x9ED8;&#x8BA4;&#x503C;|&#x53EF;&#x7528;&#x7248;&#x672C;|<br>|:&#x2014;:|:&#x2014;:|:&#x2014;:|:&#x2014;:|<br>|maxAge|&#x8BBE;&#x7F6E;<code>Cache-Control</code>&#x7684;<code>max-age</code>&#x5C5E;&#x6027;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x6216;&#x8005;&#x662F;<a href="https://www.npmjs.org/package/ms" target="_blank" rel="noopener">ms format</a>&#x7684;&#x4E00;&#x4E32;&#x5B57;&#x7B26;&#x4E32;|0||<br>|root|&#x76F8;&#x5BF9;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x6839;&#x76EE;&#x5F55;|||<br>|lastModified|&#x8BBE;&#x7F6E;<code>Last-Modified</code>&#x5934;&#x90E8;&#x4E3A;&#x6B64;&#x6587;&#x4EF6;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x3002;&#x8BBE;&#x7F6E;<code>false</code>&#x6765;&#x7981;&#x7528;&#x5B83;|Enable|4.9.0+|<br>|headers|&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x6587;&#x4EF6;&#x6240;&#x5728;&#x7684;sever&#x7684;HTTP&#x5934;&#x90E8;&#x3002;(&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x7FFB;&#x8BD1;&#x4E86;)|||<br>|dotfiles|&#x662F;&#x5426;&#x652F;&#x6301;&#x70B9;&#x5F00;&#x5934;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x9009;&#x9879;&#x3002;&#x53EF;&#x9009;&#x7684;&#x503C;&#x201D;allow&#x201D;,&#x201D;deny&#x201D;,&#x201D;ignore&#x201D;|&#x201D;ignore&#x201D;||</p>
<p>&#x5F53;&#x4F20;&#x8F93;&#x5B8C;&#x6210;&#x6216;&#x8005;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;&#x9519;&#x8BEF;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x8C03;&#x7528;<code>fn</code>&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x4E86;&#x548C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#xFF0C;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x660E;&#x786E;&#x5730;&#x901A;&#x8FC7;&#x7ED3;&#x675F;&#x8BF7;&#x6C42;-&#x54CD;&#x5E94;&#x5FAA;&#x73AF;&#x6216;&#x8005;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x4E0B;&#x4E2A;&#x8DEF;&#x7531;&#x6765;&#x5904;&#x7406;&#x54CD;&#x5E94;&#x8FC7;&#x7A0B;&#x3002;<br>&#x4E0B;&#x9762;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x6240;&#x6709;&#x53C2;&#x6570;&#x7684;&#x4F7F;&#x7528;<code>res.sendFile()</code>&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="js">app.get(&apos;/file/:name&apos;, function(req, res, next) {

    var options = {
        root:__dirname + &apos;/public&apos;,
        dotfile:&apos;deny&apos;,
        headers:{
            &apos;x-timestamp&apos;:Date.now(),
            &apos;x-sent&apos;:true
        }
    };

    var fileName = req.params.name;
    res.sendFile(fileName, options, function(err) {
        if (err) {
            console.log(err);
            res.status(err.status).end();
        }
        else {
            console.log(&apos;sent&apos;, fileName);
        }
    });



});
</code></pre>
<p><code>res.sendFile</code>&#x63D0;&#x4F9B;&#x4E86;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x7684;&#x7EC6;&#x7C92;&#x5EA6;&#x652F;&#x6301;&#xFF0C;&#x5982;&#x4E0B;&#x4F8B;&#x5B50;&#x8BF4;&#x660E;&#xFF1A;</p>
<pre><code class="js">app.get(&apos;/user/:uid/photos/:file&apos;, function(req, res) {
    var uid = req.params.uid
        , file = req.params.file;


    req.user.mayViewFilesFrom(uid, function(yes) {
        if (yes) {
            res.sendFile(&apos;/upload/&apos; + uid + &apos;/&apos; + file);
        }
        else {
            res.status(403).send(&apos;Sorry! you cant see that.&apos;);
        }
    });

})</code></pre>
<p>&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x4F60;&#x6709;&#x95EE;&#x9898;&#x6216;&#x8005;&#x5173;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x9605;<a href="https://github.com/pillarjs/send?_ga=1.256986891.1201680737.1446005628" target="_blank" rel="noopener">send</a>&#x3002;</p>
<p>####res.sendStatus(statusCode)<br>&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#x7684;<code>HTTP status code</code>&#x4E3A;<code>statusCode</code>&#x5E76;&#x4E14;&#x53D1;&#x9001;<code>statusCode</code>&#x7684;&#x76F8;&#x5E94;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5F62;&#x5F0F;&#x4F5C;&#x4E3A;&#x54CD;&#x5E94;&#x7684;Body&#x3002;</p>
<pre><code class="js">    res.sendStatus(200); // equivalent to res.status(200).send(&apos;OK&apos;);
    res.sendStatus(403); // equivalent to res.status(403).send(&apos;Forbidden&apos;);
    res.sendStatus(404); // equivalent to res.status(404).send(&apos;Not Found&apos;);
    res.sendStatus(500); // equivalent to res.status(500).send(&apos;Internal Server Error&apos;)</code></pre>
<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x72B6;&#x6001;&#x88AB;&#x6307;&#x5B9A;&#xFF0C;&#x8FD9;&#x4E2A;HTTP status&#x4F9D;&#x7136;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;<code>statusCode</code>&#x5E76;&#x4E14;&#x7528;&#x8FD9;&#x4E2A;code&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A;Body&#x3002;</p>
<pre><code class="js">res.sendStatus(2000); // equivalent to res.status(2000).send(&apos;2000&apos;);</code></pre>
<p><a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener">More about HTTP Status Codes</a></p>
<p>####res.set(field [, value])<br>&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#x7684;HTTP&#x5934;&#x90E8;<code>field</code>&#x4E3A;<code>value</code>&#x3002;&#x4E3A;&#x4E86;&#x4E00;&#x6B21;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4E3A;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="js">res.set(&apos;Content-Type&apos;, &apos;text/plain&apos;);

res.set({
    &apos;Content-Type&apos;:&apos;text/plain&apos;,
    &apos;Content-Length&apos;:&apos;123&apos;,
    &apos;ETag&apos;:&apos;123456&apos;
})</code></pre>
<p>&#x5176;&#x548C;<code>res.header(field [,value])</code>&#x6548;&#x679C;&#x4E00;&#x81F4;&#x3002;</p>
<p>####res.status(code)<br>&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#x7684;HTTP status&#x3002;&#x5176;&#x662F;Node&#x4E2D;<a href="http://nodejs.org/api/http.html#http_response_statuscode" target="_blank" rel="noopener">response.statusCode</a>&#x7684;&#x4E00;&#x4E2A;&#x8FDE;&#x8D2F;&#x6027;&#x7684;&#x522B;&#x540D;&#x3002;</p>
<pre><code class="js">res.status(403).end();
res.status(400).send(&apos;Bad Request&apos;);
res.status(404).sendFile(&apos;/absolute/path/to/404.png&apos;);</code></pre>
<p>####res.type(type)<br>&#x8BBE;&#x7F6E;<code>Content-Type</code>HTTP&#x5934;&#x90E8;&#x4E3A;MIME type&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x6307;&#x5B9A;&#x7684;type&#x80FD;&#x591F;&#x88AB;<a href="https://github.com/broofa/node-mime?_ga=1.67301009.1201680737.1446005628#mimelookuppath" target="_blank" rel="noopener">mime.lookup</a>&#x786E;&#x5B9A;&#x3002;&#x5982;&#x679C;<code>type</code>&#x5305;&#x542B;<code>/</code>&#x5B57;&#x7B26;&#xFF0C;&#x90A3;&#x4E48;&#x8BBE;&#x7F6E;<code>Content-Type</code>&#x4E3A;<code>type</code>(&#x6211;&#x5DF2;&#x7ECF;&#x6655;&#x4E86;)&#x3002;</p>
<pre><code class="js">res.type(&apos;.html&apos;);              // =&gt; &apos;text/html&apos;
res.type(&apos;html&apos;);               // =&gt; &apos;text/html&apos;
res.type(&apos;json&apos;);               // =&gt; &apos;application/json&apos;
res.type(&apos;application/json&apos;);   // =&gt; &apos;application/json&apos;
res.type(&apos;png&apos;);                // =&gt; image/png:</code></pre>
<p>####res.vary(field)<br>&#x8BBE;&#x7F6E;<code>Vary</code>&#x54CD;&#x5E94;&#x5934;&#x4E3A;<code>field</code>&#xFF0C;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x4E0D;&#x5728;&#x90A3;&#x91CC;&#x3002;(&#x4E0D;&#x61C2;&#x4EC0;&#x4E48;&#x610F;&#x601D;)</p>
<pre><code class="js">res.vary(&apos;User-Agent&apos;).render(&apos;docs&apos;);</code></pre>
<p>##Router<br>&#x4E00;&#x4E2A;<code>router</code>&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x5B9E;&#x4F8B;&#x5173;&#x4E8E;&#x4E2D;&#x95F4;&#x4EF6;&#x548C;&#x8DEF;&#x7531;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x5176;&#x662F;&#x4E00;&#x4E2A;&#x201D;mini-application&#x201D;&#xFF08;&#x8FF7;&#x4F60;&#x7A0B;&#x5E8F;&#xFF09;&#xFF0C;&#x5176;&#x5177;&#x6709;&#x64CD;&#x4F5C;&#x4E2D;&#x95F4;&#x4EF6;&#x548C;&#x8DEF;&#x7531;&#x65B9;&#x6CD5;&#x7684;&#x80FD;&#x529B;&#x3002;&#x6BCF;&#x4E2A;<code>Express</code>&#x7A0B;&#x5E8F;&#x6709;&#x4E00;&#x4E2A;&#x5185;&#x5EFA;&#x7684;app&#x8DEF;&#x7531;&#x3002;<br>&#x8DEF;&#x7531;&#x81EA;&#x8EAB;&#x8868;&#x73B0;&#x4E3A;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x4F5C;&#x4E3A;<code>app.use()</code>&#x65B9;&#x6CD5;&#x7684;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6216;&#x8005;&#x4F5C;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x7684;<code>use()</code>&#x7684;&#x53C2;&#x6570;&#x3002;<br>&#x9876;&#x5C42;&#x7684;<code>express</code>&#x5BF9;&#x8C61;&#x6709;&#x4E00;&#x4E2A;<code>Router()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Router()</code>&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>router</code>&#x5BF9;&#x8C61;&#x3002;</p>
<p>####Router([options])<br>&#x5982;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#xFF1A;</p>
<pre><code class="js">var router = express.Router([options]);</code></pre>
<p><code>options</code>&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8DEF;&#x7531;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5176;&#x6709;&#x4E0B;&#x5217;&#x9009;&#x62E9;&#xFF1A;<br>|&#x5C5E;&#x6027;|&#x63CF;&#x8FF0;|&#x9ED8;&#x8BA4;&#x503C;|&#x53EF;&#x7528;&#x6027;|<br>|:&#x2014;:|:&#x2014;:|:&#x2014;:|:&#x2014;:|<br>|caseSensitive|&#x662F;&#x5426;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;|&#x9ED8;&#x8BA4;&#x4E0D;&#x542F;&#x7528;&#x3002;&#x5BF9;&#x5F85;<code>/Foo</code>&#x548C;<code>/foo</code>&#x4E00;&#x6837;&#x3002;||<br>|mergeParams|&#x4FDD;&#x5B58;&#x7236;&#x8DEF;&#x7531;&#x7684;<code>res.params</code>&#x3002;&#x5982;&#x679C;&#x7236;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x548C;&#x5B50;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x51B2;&#x7A81;&#xFF0C;&#x5B50;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x4F18;&#x5148;&#x3002;|false|4.5.0+|<br>|strict|&#x4F7F;&#x80FD;&#x4E25;&#x683C;&#x8DEF;&#x7531;&#x3002;|&#x9ED8;&#x8BA4;&#x4E0D;&#x542F;&#x7528;&#xFF0C;<code>/foo</code>&#x548C;<code>/foo/</code>&#x88AB;&#x8DEF;&#x7531;&#x4E00;&#x6837;&#x5BF9;&#x5F85;&#x5904;&#x7406;||</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x5C06;<code>router</code>&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4E0A;&#x6DFB;&#x52A0;&#x4E2D;&#x95F4;&#x4EF6;&#x548C;HTTP&#x8DEF;&#x7531;&#x65B9;&#x6CD5;(&#x4F8B;&#x5982;<code>get</code>&#xFF0C;<code>put</code>&#xFF0C;<code>post</code>&#x7B49;&#x7B49;)&#x3002;</p>
<pre><code class="js">// invoked for any requests passed to this router
router.use(function(req, res, next) {
  // .. some logic here .. like any other middleware
  next();
});

// will handle any request that ends in /events
// depends on where the router is &quot;use()&apos;d&quot;
router.get(&apos;/events&apos;, function(req, res, next) {
  // ..
});
</code></pre>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x4E2A;&#x7279;&#x522B;&#x7684;&#x6839;URL&#x4E0A;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x5C31;&#x4EE5;&#x5C06;&#x4F60;&#x7684;&#x5404;&#x4E2A;&#x8DEF;&#x7531;&#x653E;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x6216;&#x8005;&#x751A;&#x81F3;&#x662F;mini&#x7684;&#x7A0B;&#x5E8F;&#x3002;</p>
<pre><code class="js">// only requests to /calendar/* will be sent to our &quot;router&quot;
app.use(&apos;/calendar&apos;, router);</code></pre>
<p>###Methods</p>
<p>####router.all(path, [callback, &#x2026;] callback)<br>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x548C;<code>router.METHOD()</code>&#x65B9;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x5339;&#x914D;&#x6240;&#x6709;&#x7684;HTTP&#x52A8;&#x4F5C;&#x3002;<br>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9;&#x60F3;&#x6620;&#x5C04;&#x5168;&#x5C40;&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#x5230;&#x7279;&#x6B8A;&#x7684;&#x8DEF;&#x5F84;&#x524D;&#x7F00;&#x6216;&#x8005;&#x4EFB;&#x610F;&#x5339;&#x914D;&#x662F;&#x5341;&#x5206;&#x6709;&#x7528;&#x7684;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x653E;&#x7F6E;&#x4E0B;&#x9762;&#x6240;&#x793A;&#x7684;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x5728;&#x5176;&#x4ED6;&#x8DEF;&#x7531;&#x7684;&#x524D;&#x9762;&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x5C06;&#x8981;&#x6C42;&#x4ECE;&#x8FD9;&#x4E2A;&#x70B9;&#x5F00;&#x59CB;&#x7684;&#x6240;&#x6709;&#x7684;&#x8DEF;&#x7531;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x64CD;&#x4F5C;&#x548C;&#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;&#x8BB0;&#x4F4F;&#xFF0C;&#x8FD9;&#x4E9B;&#x5168;&#x5C40;&#x7684;&#x903B;&#x8F91;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7ED3;&#x675F;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x5468;&#x671F;&#xFF1A;<code>loaduser</code>&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;<code>next()</code>&#x6765;&#x5C06;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x79FB;&#x4EA4;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;</p>
<pre><code class="js">router.all(&apos;*&apos;, requireAuthentication, loadUser);</code></pre>
<p>&#x76F8;&#x7B49;&#x7684;&#x5F62;&#x5F0F;:</p>
<pre><code class="js">router.all(&apos;*&apos;, requireAuthentication)
router.all(&apos;*&apos;, loadUser);</code></pre>
<p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x767D;&#x540D;&#x5355;&#x5168;&#x5C40;&#x529F;&#x80FD;&#x7684;&#x4F8B;&#x5B50;&#x3002;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5F88;&#x50CF;&#x524D;&#x9762;&#x7684;&#xFF0C;&#x4E0D;&#x8FC7;&#x5176;&#x4EC5;&#x4EC5;&#x4F5C;&#x7528;&#x4E8E;&#x4EE5;<code>/api</code>&#x5F00;&#x5934;&#x7684;&#x8DEF;&#x5F84;:</p>
<pre><code class="js">router.all(&apos;/api/*&apos;, requireAuthentication);</code></pre>
<h4 id="router-METHOD-path-callback-&#x2026;-callback"><a href="#router-METHOD-path-callback-&#x2026;-callback" class="headerlink" title="router.METHOD(path, [callback, &#x2026;] callback)"></a>router.METHOD(path, [callback, &#x2026;] callback)</h4><p><code>router.METHOD()</code>&#x65B9;&#x6CD5;&#x63D0;&#x4F9B;&#x4E86;&#x8DEF;&#x7531;&#x65B9;&#x6CD5;&#x5728;<code>Express</code>&#x4E2D;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>METHOD</code>&#x662F;HTTP&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#xFF0C;&#x6BD4;&#x5982;<code>GET</code>&#xFF0C;<code>PUT</code>&#xFF0C;<code>POST</code>&#x7B49;&#x7B49;&#xFF0C;&#x4F46;<code>router</code>&#x4E2D;&#x7684;METHOD&#x662F;&#x5C0F;&#x5199;&#x7684;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x65B9;&#x6CD5;&#x662F;<code>router.get()</code>&#xFF0C;<code>router.put()</code>&#xFF0C;<code>router.post()</code>&#x7B49;&#x7B49;&#x3002;<br>&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>next(&apos;router&apos;)</code>&#x6765;&#x7ED5;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x4E3A;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x6EE1;&#x8DB3;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x5904;&#x7406;&#x6761;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x4F20;&#x9012;&#x63A7;&#x5236;&#x5230;&#x968F;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x3002;<br>&#x4E0B;&#x9762;&#x7684;&#x7247;&#x6BB5;&#x53EF;&#x80FD;&#x8BF4;&#x660E;&#x4E86;&#x6700;&#x7B80;&#x5355;&#x7684;&#x8DEF;&#x7531;&#x5B9A;&#x4E49;&#x3002;Experss&#x8F6C;&#x6362;path&#x5B57;&#x7B26;&#x4E32;&#x4E3A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x7528;&#x4E8E;&#x5185;&#x90E8;&#x5339;&#x914D;&#x4F20;&#x5165;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x5728;&#x5339;&#x914D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x4E0D;&#x8003;&#x8651;<code>Query strings</code>&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x201D;GET /&#x201C;&#x5C06;&#x5339;&#x914D;&#x4E0B;&#x9762;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x201D;GET /?name=tobi&#x201D;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<pre><code class="js">router.get(&apos;/&apos;, function(req, res) {
    res.send(&apos;Hello World&apos;);
});</code></pre>
<p>&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x5339;&#x914D;&#x7684;path&#x6709;&#x7279;&#x6B8A;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x53EF;&#x4EE5;&#x5339;&#x914D;&#x201D;GET /commits/71dbb9c&#x201D;&#x548C;&#x201D;GET /commits/71bb92..4c084f9&#x201D;&#x3002;</p>
<pre><code class="js">router.get(/^\/commits\/(\w+)(?:\.\.(\w+))?$/, function(req, res) {
    var from = req.params[0];
    var to = req.params[1];
    res.send(&apos;commit range &apos; + from + &apos;..&apos; + to);
});</code></pre>
<h4 id="router-param-name-callback"><a href="#router-param-name-callback" class="headerlink" title="router.param(name, callback)"></a>router.param(name, callback)</h4><p>&#x7ED9;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x6DFB;&#x52A0;&#x56DE;&#x8C03;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>name</code>&#x662F;&#x53C2;&#x6570;&#x540D;&#xFF0C;<code>function</code>&#x662F;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x6309;&#x5E8F;&#x662F;&#x8BF7;&#x6C42;&#x5BF9;&#x8C61;&#xFF0C;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#xFF0C;&#x4E0B;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x53C2;&#x6570;&#x503C;&#x548C;&#x53C2;&#x6570;&#x540D;&#x3002;&#x867D;&#x7136;<code>name</code>&#x5728;&#x6280;&#x672F;&#x4E0A;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x81EA;Express V4.11.0&#x4E4B;&#x540E;&#x7248;&#x672C;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;(&#x89C1;&#x4E0B;&#x9762;)&#x3002;</p>
<blockquote>
<p>&#x4E0D;&#x50CF;<code>app.param()</code>&#xFF0C;<code>router.param()</code>&#x4E0D;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x3002;</p>
</blockquote>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5F53;<code>:user</code>&#x51FA;&#x73B0;&#x5728;&#x8DEF;&#x7531;&#x8DEF;&#x5F84;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6620;&#x5C04;&#x7528;&#x6237;&#x52A0;&#x8F7D;&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#x6765;&#x81EA;&#x52A8;&#x63D0;&#x4F9B;<code>req.user</code>&#x7ED9;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#xFF0C;&#x6216;&#x8005;&#x5BF9;&#x8F93;&#x5165;&#x7684;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;</p>
<pre><code class="js">    router.param(&apos;user&apos;, function(req, res, next, id) {
        User.find(id, function(error, user) {
            if (err) {
                next(err);
            }
            else if (user){
                req.user = user;
            } else {
                next(new Error(&apos;failed to load user&apos;));
            }
        });
    });</code></pre>
<p>&#x5BF9;&#x4E8E;<code>Param</code>&#x7684;&#x56DE;&#x8C03;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x7531;&#x6765;&#x8BF4;&#xFF0C;&#x4ED6;&#x4EEC;&#x662F;&#x5C40;&#x90E8;&#x7684;&#x3002;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x88AB;&#x6302;&#x8F7D;&#x7684;app&#x6216;&#x8005;&#x8DEF;&#x7531;&#x7EE7;&#x627F;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5B9A;&#x4E49;&#x5728;<code>router</code>&#x4E0A;&#x7684;<code>param</code>&#x56DE;&#x8C03;&#x53EA;&#x6709;&#x662F;&#x5728;<code>router</code>&#x4E0A;&#x7684;&#x8DEF;&#x7531;&#x5177;&#x6709;&#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x65F6;&#x624D;&#x8D77;&#x4F5C;&#x7528;&#x3002;<br>&#x5728;&#x5B9A;&#x4E49;<code>param</code>&#x7684;&#x8DEF;&#x7531;&#x4E0A;&#xFF0C;<code>param</code>&#x56DE;&#x8C03;&#x90FD;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x88AB;&#x8C03;&#x7528;&#x7684;&#xFF0C;&#x5B83;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;-&#x54CD;&#x5E94;&#x5FAA;&#x73AF;&#x4E2D;&#x90FD;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x5E76;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x6B21;&#xFF0C;&#x5373;&#x4F7F;&#x591A;&#x4E2A;&#x8DEF;&#x7531;&#x90FD;&#x5339;&#x914D;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="js">router.param(&apos;id&apos;, function(req, res, next, id) {
    console.log(&apos;CALLED ONLY ONCE&apos;);
    next();
});

router.get(&apos;/user/:id&apos;, function(req, res, next) {
    console.log(&apos;although this matches&apos;);
    next();
});

router.get(&apos;/user/:id&apos;, function(req, res) {
    console.log(&apos;and this mathces too&apos;);
    res.end();
});</code></pre>
<p>&#x5F53;<code>GET /user/42</code>&#xFF0C;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x7684;&#x7ED3;&#x679C;:</p>
<pre><code class="log">    CALLED ONLY ONCE
    although this matches
    and this matches too</code></pre>
<p>`</p>
<blockquote>
<p>&#x4E0B;&#x9762;&#x7AE0;&#x8282;&#x63CF;&#x8FF0;&#x7684;<code>router.param(callback)</code>&#x5728;v4.11.0&#x4E4B;&#x540E;&#x88AB;&#x5F03;&#x7528;&#x3002;</p>
</blockquote>
<p>&#x901A;&#x8FC7;&#x53EA;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x7ED9;<code>router.param(name, callback)</code>&#x65B9;&#x6CD5;&#xFF0C;<code>router.param(naem, callback)</code>&#x65B9;&#x6CD5;&#x7684;&#x884C;&#x4E3A;&#x5C06;&#x88AB;&#x5B8C;&#x5168;&#x6539;&#x53D8;&#x3002;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#x662F;&#x5173;&#x4E8E;<code>router.param(name, callback)</code>&#x8BE5;&#x5177;&#x6709;&#x600E;&#x6837;&#x7684;&#x884C;&#x4E3A;&#x7684;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5E76;&#x4E14;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;<br>&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x9700;&#x8981;&#x6355;&#x83B7;&#x7684;url&#x7684;&#x53C2;&#x6570;&#x540D;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4E00;&#x7684;JavaScript&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x53EF;&#x80FD;&#x5728;&#x5B9E;&#x73B0;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x65F6;&#x88AB;&#x4F7F;&#x7528;&#x3002;<br>&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x51B3;&#x5B9A;&#x4E86;&#x5F53;URL&#x4E2D;&#x5305;&#x542B;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x65F6;&#x6240;&#x91C7;&#x53D6;&#x7684;&#x884C;&#x4E3A;&#x3002;<br>&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>router.param(name, callback)</code>&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x88AB;&#x4FEE;&#x6539;&#x6210;&#x4E86;<code>router.param(name, accessId)</code>&#x3002;&#x66FF;&#x6362;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x540D;&#x548C;&#x56DE;&#x8C03;&#xFF0C;<code>router.param()</code>&#x73B0;&#x5728;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x540D;&#x548C;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x3002;</p>
<pre><code class="js">    var express = require(&apos;express&apos;);
    var app = express();
    var router = express.Router();

    router.param(function(param, option){
        return function(req, res, next, val) {
            if (val == option) {
                next();
            }
            else {
                res.sendStatus(403);
            }
        }
    });

    router.param(&apos;id&apos;, 1337);

    router.get(&apos;/user/:id&apos;, function(req, res) {
        res.send(&apos;Ok&apos;);
    });

    app.use(router);

    app.listen(3000, function() {
        console.log(&apos;Ready&apos;);
    });</code></pre>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>router.param(name. callback)</code>&#x53C2;&#x6570;&#x7B7E;&#x540D;&#x4FDD;&#x6301;&#x548C;&#x539F;&#x6765;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x66FF;&#x6362;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x68C0;&#x6D4B;&#x65B9;&#x6CD5;&#x6765;&#x68C0;&#x6D4B;<code>user id</code>&#x7684;&#x7C7B;&#x578B;&#x6B63;&#x786E;&#x6027;&#x3002;</p>
<pre><code class="js">    router.param(function(param, validator) {
        return function(req, res, next, val) {
            if (validator(val)) {
                next();
            }
            else {
                res.sendStatus(403);
            }
        }
    });

    router.param(&apos;id&apos;, function(candidate) {
        return !isNaN(parseFloat(candidate)) &amp;&amp; isFinite(candidate);
    });</code></pre>
<h4 id="router-route-path"><a href="#router-route-path" class="headerlink" title="router.route(path)"></a>router.route(path)</h4><p>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x8DEF;&#x7531;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x4E4B;&#x540E;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4E0A;&#x65BD;&#x52A0;&#x5404;&#x79CD;HTTP&#x52A8;&#x4F5C;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x4F7F;&#x7528;<code>app.route()</code>&#x6765;&#x907F;&#x514D;&#x91CD;&#x590D;&#x8DEF;&#x7531;&#x540D;&#x5B57;(&#x56E0;&#x6B64;&#x9519;&#x5B57;&#x9519;&#x8BEF;)&#x2013;&#x540E;&#x9762;&#x8FD9;&#x53E5;&#x4E0D;&#x77E5;&#x9053;&#x8BF4;&#x7684;&#x4EC0;&#x4E48;&#x9B3C;&#xFF0C;&#x5927;&#x6982;&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;&#x907F;&#x514D;&#x540C;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x6709;&#x4E24;&#x4E2A;&#x8DEF;&#x7531;&#x5B9E;&#x4F8B;&#x3002;<br>&#x6784;&#x5EFA;&#x5728;&#x4E0A;&#x9762;&#x7684;<code>router.param()</code>&#x4F8B;&#x5B50;&#x4E4B;&#x4E0A;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5C55;&#x793A;&#x4E86;&#x600E;&#x4E48;&#x4F7F;&#x7528;<code>router.route()</code>&#x6765;&#x6307;&#x5B9A;&#x5404;&#x79CD;HTTP&#x65B9;&#x6CD5;&#x7684;&#x5904;&#x7406;&#x53E5;&#x67C4;&#x3002;</p>
<pre><code class="js">var router = express.Router();

router.param(&apos;user_id&apos;, function(req, res, next, id) {
    // sample user, would actually fetch from DB, etc...
    req.user = {
        id:id,
        name:&quot;TJ&quot;
    };
    next();
});

router.route(&apos;/users/:user_id&apos;)
    .all(function(req, res, next) {
        // runs for all HTTP verbs first
        // think of it as route specific middleware!
        next();
    })
    .get(function(req, res, next) {
        res.json(req.user);
    })
    .put(function(req, res, next) {
        // just an example of maybe updating the user
        req.user.name = req.params.name;
        // save user ... etc
        res.json(req.user);
    })
    .post(function(req, res, next) {
        next(new Error(&apos;not implemented&apos;));
    })
    .delete(function(req, res, next) {
        next(new Error(&apos;not implemented&apos;));
    })</code></pre>
<p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x5355;&#x4E2A;<code>/usrs/:user_id</code>&#x8DEF;&#x5F84;&#x6765;&#x6DFB;&#x52A0;&#x4E86;&#x5404;&#x79CD;&#x7684;HTTP&#x65B9;&#x6CD5;&#x3002;</p>
<h4 id="router-use-path-function-&#x2026;-function"><a href="#router-use-path-function-&#x2026;-function" class="headerlink" title="router.use([path], [function, &#x2026;] function)"></a>router.use([path], [function, &#x2026;] function)</h4><p>&#x7ED9;&#x53EF;&#x9009;&#x7684;<code>path</code>&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x6302;&#x8F7D;&#x7ED9;&#x5B9A;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#xFF0C;&#x672A;&#x6307;&#x5B9A;<code>path</code>&#x53C2;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;<code>/</code>&#x3002;<br>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#x4E8E;<code>app.use()</code>&#x3002;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#x548C;&#x7528;&#x4F8B;&#x5728;&#x4E0B;&#x9762;&#x63CF;&#x8FF0;&#x3002;&#x67E5;&#x9605;<a href="http://expressjs.com/en/4x/api.html#app.use" target="_blank" rel="noopener">app.use()</a>&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#x3002;<br>&#x4E2D;&#x95F4;&#x4EF6;&#x5C31;&#x50CF;&#x4E00;&#x4E2A;&#x6C34;&#x6696;&#x7BA1;&#x9053;&#xFF0C;&#x8BF7;&#x6C42;&#x5728;&#x4F60;&#x5B9A;&#x4E49;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x5904;&#x5F00;&#x59CB;&#xFF0C;&#x987A;&#x7740;&#x4E2D;&#x95F4;&#x4EF6;&#x5806;&#x6808;&#x4E00;&#x8DEF;&#x5F80;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x8DEF;&#x5F84;&#x5339;&#x914D;&#x5219;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x3002;</p>
<pre><code class="js">var express = require(&apos;express&apos;);
var app = express();
var router = express.Router();


// simple logger for this router`s requests
// all requests to this router will first hit this middleware

router.use(function(req, res, next) {
    console.log(&apos;%s %s %s&apos;, req.method, req.url, req.path);
    next();
})

// this will only be invoked if the path starts with /bar form the mount ponit
router.use(&apos;/bar&apos;, function(req, res, next) {
    // ... maybe some additional /bar logging ...
    next();
})

// always be invoked
router.use(function(req, res, next) {
    res.send(&apos;hello world&apos;)&#xFF1B;
})

app.use(&apos;/foo&apos;, router);

app.listen(3000);
</code></pre>
<p>&#x5BF9;&#x4E8E;&#x4E2D;&#x95F4;&#x4EF6;<code>function</code>&#xFF0C;&#x6302;&#x8F7D;&#x7684;&#x8DEF;&#x5F84;&#x662F;&#x88AB;&#x5265;&#x79BB;&#x7684;&#x548C;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x3002;&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x4E3B;&#x8981;&#x7684;&#x5F71;&#x54CD;&#x662F;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x6302;&#x8F7D;&#x76F8;&#x540C;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x53EF;&#x80FD;&#x5BF9;&#x4EE3;&#x7801;&#x4E0D;&#x505A;&#x6539;&#x52A8;&#xFF0C;&#x5C3D;&#x7BA1;&#x5176;&#x524D;&#x7F00;&#x5DF2;&#x7ECF;&#x6539;&#x53D8;&#x3002;<br>&#x4F60;&#x4F7F;&#x7528;<code>router.use()</code>&#x5B9A;&#x4E49;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x987A;&#x5E8F;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x4E2D;&#x95F4;&#x4EEC;&#x662F;&#x6309;&#x5E8F;&#x88AB;&#x8C03;&#x7528;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x987A;&#x5E8F;&#x51B3;&#x5B9A;&#x4E86;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x901A;&#x5E38;&#x65E5;&#x5FD7;&#x662F;&#x4F60;&#x5C06;&#x4F7F;&#x7528;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x4EE5;&#x4FBF;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x90FD;&#x88AB;&#x8BB0;&#x5F55;&#x3002;</p>
<pre><code class="js">var logger = require(&apos;morgan&apos;);

router.use(logger());
router.use(express.static(__dirname + &apos;/public&apos;));
router.use(function(req, res) {
    res.send(&apos;Hello&apos;);
});</code></pre>
<p>&#x73B0;&#x5728;&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x4F60;&#x4E0D;&#x5E0C;&#x671B;&#x8BB0;&#x5F55;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x4E3A;&#x4E86;&#x7EE7;&#x7EED;&#x8BB0;&#x5F55;&#x90A3;&#x4E9B;&#x5B9A;&#x4E49;&#x5728;<code>logger()</code>&#x4E4B;&#x540E;&#x7684;&#x8DEF;&#x7531;&#x548C;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x5C06;<code>static()</code>&#x79FB;&#x52A8;&#x5230;&#x524D;&#x9762;&#x6765;&#x89E3;&#x51B3;&#xFF1A;</p>
<pre><code class="js">router.use(express.static(__dirname + &apos;/public&apos;));
router.use(logger());
router.use(function(req, res){
  res.send(&apos;Hello&apos;);
});</code></pre>
<p>&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x786E;&#x51FF;&#x7684;&#x4F8B;&#x5B50;&#x662F;&#x4ECE;&#x4E0D;&#x540C;&#x7684;&#x8DEF;&#x5F84;&#x6258;&#x7BA1;&#x9759;&#x6001;&#x6587;&#x4EF6;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;<code>./public</code>&#x653E;&#x5230;&#x524D;&#x9762;&#x6765;&#x83B7;&#x5F97;&#x66F4;&#x9AD8;&#x7684;&#x4F18;&#x5148;&#x7EA7;:</p>
<pre><code class="js">app.use(express.static(__dirname + &apos;/public&apos;));
app.use(express.static(__dirname + &apos;/files&apos;));
app.use(express.static(__dirname + &apos;/uploads&apos;));</code></pre>
<p><code>router.use()</code>&#x65B9;&#x6CD5;&#x4E5F;&#x652F;&#x6301;&#x547D;&#x540D;&#x53C2;&#x6570;&#xFF0C;&#x4EE5;&#x4FBF;&#x4F60;&#x7684;&#x6302;&#x8F7D;&#x70B9;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x8DEF;&#x7531;&#x800C;&#x8A00;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x547D;&#x540D;&#x53C2;&#x6570;&#x6765;&#x8FDB;&#x884C;&#x9884;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x5F88;&#x6709;&#x76CA;&#x7684;&#x3002;</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 luyue94666@163.com </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>Express 4.x API</p>
    
    <p><span class="copy-title">本文作者:</span><a href="javascript:void(0)" title="Eifersucht">Eifersucht</a></p>
    <p><span class="copy-title">发布时间:</span>2018-06-28, 16:03:55</p>
    <p><span class="copy-title">最后更新:</span>2019-09-19, 14:29:28</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2018/06/28/Nodejs/Express中文文档/" title="Express 4.x API">http://luyue94.github.com/2018/06/28/Nodejs/Express中文文档/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2016-2019 luyue94</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" href="javascript:void(0)"></a>
    </div>
</div>
<div class="acParent"></div>

</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#CSS','#Node','#前端','#React','#浏览器','#移动端','#工具','#JS','#Vue',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
    .post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
